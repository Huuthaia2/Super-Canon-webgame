window.__require=function e(t,o,n){function a(r,c){if(!o[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}}var d=o[r]={exports:{}};t[r][0].call(d.exports,function(e){return a(t[r][1][e]||e)},d,d.exports,e,t,o,n)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<n.length;r++)a(n[r]);return a}({Ball:[function(e,t,o){"use strict";cc._RF.push(t,"ab059qqtK1H053zRZ/21El2","Ball");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./common/Define"),r=e("./manager/GameManager"),c=e("./common/Common"),s=e("./datas/LDataStoneManager"),l=e("./Levellnfo"),d=e("./manager/ParticleEffectManager"),u=e("./manager/UIManager"),f=e("./UserInfo"),h=cc._decorator,p=h.ccclass,g=h.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelNumber=null,t.icon=null,t.effectRoot=null,t.nTotalNumber=0,t.isCanDrop=!1,t.callBack=null,t.physicsCircle=null,t.stoneData=null,t.spriteIcon=null,t.initScore=null,t.isCanShake=!0,t.lastGravityScale=0,t.lastAngularVelocity=0,t.lasLlinearVelocity=cc.Vec2.ZERO,t._stoneId=-1,t}return n(t,e),Object.defineProperty(t.prototype,"stoneId",{get:function(){return this._stoneId},set:function(e){this._stoneId=e,this.stoneData=s.default.GetDataById(e)},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this.rigidBody=this.node.getComponent(cc.RigidBody),this.rigidBody.active=!1,this.rigidBody.linearVelocity=cc.Vec2.ZERO,this.physicsCircle=this.node.getComponent(cc.PhysicsCircleCollider)},t.prototype.setNumber=function(e){this.nTotalNumber=e,this.initScore=this.nTotalNumber,this.labelNumber.string=c.default.getShowNumber(this.nTotalNumber),this.icon.color=c.default.getStoneColor(l.default.getCurLevelMaxScore(),this.nTotalNumber),this.handlerNumberScale()},t.prototype.getShowColor=function(){return this.node.color},t.prototype.getNumber=function(){return this.nTotalNumber},t.prototype.handlerNumberScale=function(){var e=1;1==this.labelNumber.string.length?e=this.stoneData.scalesize01:2==this.labelNumber.string.length?e=this.stoneData.scalesize02:3==this.labelNumber.string.length?e=this.stoneData.scalesize03:4==this.labelNumber.string.length&&(e=this.stoneData.scalesize04),this.labelNumber.node.setScale(e)},t.prototype.Hit=function(e){if(void 0===e&&(e=1),this.nTotalNumber=this.nTotalNumber-e,this.nTotalNumber<=0&&(this.nTotalNumber=0,r.default.instance.ShakeBg(2+this._stoneId)),this.labelNumber.string=c.default.getShowNumber(this.nTotalNumber),this.handlerNumberScale(),this.nTotalNumber>0&&(this.icon.color=c.default.getStoneColor(l.default.getCurLevelMaxScore(),this.nTotalNumber),this.isCanShake)){this.isCanShake=!1;var t=.9;this.stoneData.stonId>1&&(t=.95),this.node.runAction(cc.sequence(cc.scaleTo(.05,t),cc.scaleTo(.05,1),cc.callFunc(function(){this.isCanShake=!0}.bind(this))))}return this.nTotalNumber},t.prototype.onBeginContact=function(e,t,o){var n=o.node.name;if("floor"==n){var a=new cc.Vec2(this.node.position.x,this.node.position.y-this.stoneData.radius);d.default.getInstance().showParticleEffect(i.default.effectParticleToground,a,.5),this.rigidBody.linearVelocity=cc.v2(this.rigidBody.linearVelocity.x,i.default.ballRestitutionMaxArr[this._stoneId]),r.default.instance.ShakeBg(2+this._stoneId)}else 0==n.indexOf("cannon")&&(c.default.isGod||(f.default.curLevel<=3?u.default.getInstance().executeEvent(i.default.viewBattle,"showPrompt"):(c.default.actionTinkColor(this.labelNumber.node),r.default.instance.gameOver(this))));"floor"!=n&&"wall"!=n||Math.abs(this.rigidBody.linearVelocity.x)>200&&(this.rigidBody.linearVelocity.x>0?this.rigidBody.linearVelocity=cc.v2(100,this.rigidBody.linearVelocity.y):this.rigidBody.linearVelocity=cc.v2(-100,this.rigidBody.linearVelocity.y))},t.prototype.appear=function(e,t,o,n){void 0===t&&(t=-1),void 0===o&&(o=cc.Vec2.ZERO),void 0===n&&(n=800),this.rigidBody.active=!1,this.rigidBody.linearVelocity=cc.Vec2.ZERO,e==i.default.right?(this.node.position=cc.v2(this.getAppearPosX(e),n),this.rigidBody.angularVelocity=-30,this.node.runAction(cc.sequence(cc.moveTo(2,cc.v2(this.getAppearTargetX(e),n)),cc.callFunc(function(){this.node.group=i.default.groupBall,this.rigidBody.linearVelocity=cc.v2(-100,-100),this.rigidBody.active=!0,this.isCanDrop=!0}.bind(this))))):e==i.default.left?(this.rigidBody.angularVelocity=30,this.node.position=cc.v2(this.getAppearPosX(e),n),this.node.runAction(cc.sequence(cc.moveTo(2,cc.v2(this.getAppearTargetX(e),n)),cc.callFunc(function(){this.node.group=i.default.groupBall,this.rigidBody.linearVelocity=cc.v2(100,-100),this.isCanDrop=!0,this.rigidBody.active=!0}.bind(this))))):e==i.default.center&&(t==i.default.left?(this.node.position=o,this.rigidBody.angularVelocity=-30,this.node.group=i.default.groupBall,this.rigidBody.linearVelocity=cc.v2(-200,300),this.rigidBody.active=!0,this.isCanDrop=!0):t==i.default.right&&(this.node.position=o,this.rigidBody.angularVelocity=30,this.node.group=i.default.groupBall,this.rigidBody.linearVelocity=cc.v2(200,300),this.rigidBody.active=!0,this.isCanDrop=!0))},t.prototype.setCallBack=function(e){this.callBack=e},t.prototype.update=function(e){this.isCanDrop||(this.rigidBody.linearVelocity=cc.Vec2.ZERO)},t.prototype.stopDrop=function(){this.rigidBody.active=!1,this.rigidBody.linearVelocity=cc.Vec2.ZERO},t.prototype.getAppearPosX=function(e){return e==i.default.left?-240+this.stoneData.radius:e==i.default.right?880-this.stoneData.radius:void 0},t.prototype.getAppearTargetX=function(e){return e==i.default.left?this.stoneData.radius:e==i.default.right?640-this.stoneData.radius:void 0},t.prototype.getBreakScore=function(){return Math.ceil(this.initScore/2)},t.prototype.pauseMove=function(e){e?(this.lastGravityScale=this.rigidBody.gravityScale,this.lastAngularVelocity=this.rigidBody.angularVelocity,this.lasLlinearVelocity=this.rigidBody.linearVelocity,this.rigidBody.gravityScale=0,this.rigidBody.angularVelocity=0,this.rigidBody.linearVelocity=cc.Vec2.ZERO,this.node.pauseAllActions()):(this.node.resumeAllActions(),this.rigidBody.gravityScale=this.lastGravityScale,this.rigidBody.angularVelocity=this.lastAngularVelocity,this.rigidBody.linearVelocity=this.lasLlinearVelocity)},a([g(cc.Label)],t.prototype,"labelNumber",void 0),a([g(cc.Node)],t.prototype,"icon",void 0),a([g(cc.Node)],t.prototype,"effectRoot",void 0),t=a([p],t)}(cc.Component);o.default=v,cc._RF.pop()},{"./Levellnfo":"Levellnfo","./UserInfo":"UserInfo","./common/Common":"Common","./common/Define":"Define","./datas/LDataStoneManager":"LDataStoneManager","./manager/GameManager":"GameManager","./manager/ParticleEffectManager":"ParticleEffectManager","./manager/UIManager":"UIManager"}],BattleViewCtr:[function(e,t,o){"use strict";cc._RF.push(t,"3c355x79DdOKZp1IpohNdkI","BattleViewCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../common/Common"),r=e("./ViewBase"),c=e("../LevelProgress"),s=e("../UserInfo"),l=e("../manager/GameManager"),d=cc._decorator,u=d.ccclass,f=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textGold=null,t.textCurScore=null,t.nodeGoldTextParent=null,t.nodeLevelProgress=null,t.node_addPower=null,t.btn_addPower=null,t.text_time=null,t.isClickShare=!1,t.nodeGoldTextParentInitPos=null,t.isCanRunAction=!0,t.timeS=0,t.timeMs=99,t.isShowingPrompt=!1,t.totalTimes=0,t.isTimeDownCount=!1,t.isTimeOut=!1,t}return n(t,e),t.prototype.initView=function(){this.nodeGoldTextParentInitPos=this.nodeGoldTextParent.position,this.levelProgress=this.nodeLevelProgress.getComponent(c.default)},t.prototype.refreshView=function(e){void 0===e&&(e=!1),this.refreshGoldCound(),this.levelProgress.setLevelProgressInfo(i.default.curLevel,i.default.maxLevelScore),this.levelProgress.setProgress(i.default.curLevelScore),this.refreshScore(!e),this.refreshGoldCound(),this.isClickShare=!1,this.isTimeDownCount=!1,this.isTimeOut=!1,this.btn_addPower.active=!1,this.node_addPower.active=!1,this.node_newUserPrompt.setScale(1,0),this.isShowingPrompt=!1},t.prototype.addEvent=function(){i.default.addClickEvent(this.btn_addPower,this.onClick.bind(this))},t.prototype.onClick=function(e){},t.prototype.update=function(e){if(!this.isTimeOut&&this.isTimeDownCount){this.totalTimes=this.totalTimes+e,this.totalTimes>=1&&(this.totalTimes=0,this.timeS--);var t=this.timeS.toString();this.timeS<10&&(this.timeS<0&&(this.timeS=0),t="0"+t.toString());this.totalTimes>=.001&&(this.timeMs=this.timeMs-1,this.timeMs<=0&&(this.timeS<=0?(this.isTimeOut=!0,i.default.addPower=1,this.node_addPower.active=!1,l.default.instance.curCannonCtr.addPower(!1),this.timeMs=0):this.timeMs=99)),t=t+":"+(this.timeMs<10?"0"+this.timeMs.toString():this.timeMs.toString()),this.text_time.string=t}},t.prototype.refreshGoldCound=function(){this.textGold.string=i.default.getShowNumber(s.default.curGold);var e=60*this.textGold.string.length*-1-36;this.textGold.node.children[0].position=new cc.Vec2(e,-24),e=this.nodeGoldTextParentInitPos.x+24*(this.textGold.string.length-1),this.nodeGoldTextParent.position=new cc.Vec2(e,this.nodeGoldTextParentInitPos.y)},t.prototype.refreshScore=function(e){void 0===e&&(e=!0),this.textCurScore.string=i.default.totalShowScore.toString(),e&&this.isCanRunAction&&(this.isCanRunAction=!1,this.textCurScore.node.setScale(.45,.45),this.textCurScore.node.runAction(cc.sequence(cc.scaleTo(.1,.62,.62),cc.callFunc(function(){this.isCanRunAction=!0}.bind(this)))))},t.prototype.refreshGoldInfo=function(){this.refreshGoldCound()},t.prototype.refreshProgressInfo=function(){this.levelProgress.setLevelProgressInfo(i.default.curLevel,i.default.maxLevelScore),this.levelProgress.setProgress(i.default.curLevelScore)},t.prototype.executeEvent=function(e){if(void 0===e&&(e="defualt"),"share"==e)this.isClickShare&&(this.isClickShare=!1,this.btn_addPower.active=!1,this.isTimeDownCount=!0,this.node_addPower.active=!0,this.totalTimes=0,this.timeS=14,i.default.addPower=2,l.default.instance.curCannonCtr.addPower(!0));else if("showAddPower"==e)this.btn_addPower.active=!0,this.node_addPower.active=!1,this.isTimeDownCount=!1,this.isTimeOut=!1,this.btn_addPower.active=!0,this.node_addPower.active=!1,i.default.addPower=1;else if("refreshGold"==e)this.refreshGoldInfo();else if("refreshScore"==e)this.refreshScore();else if("refreshProgressInfo"==e)this.refreshProgressInfo();else if("hideAddPower"==e)this.isTimeDownCount=!1,this.isTimeOut=!1,i.default.addPower=1,this.btn_addPower.active=!1,this.node_addPower.active=!1,l.default.instance.curCannonCtr.addPower(!1);else if("showPrompt"==e){if(this.isShowingPrompt)return;this.node_newUserPrompt.runAction(cc.sequence(cc.scaleTo(.2,1,1),cc.delayTime(8),cc.callFunc(function(){this.isShowingPrompt&&this.node_newUserPrompt.runAction(cc.sequence(cc.scaleTo(.2,1,0),cc.callFunc(function(){this.isShowingPrompt=!1}.bind(this))))}.bind(this)))),this.isShowingPrompt=!0}else"hidePrompt"==e&&(this.node_newUserPrompt.setScale(1,0),this.isShowingPrompt=!1)},a([f(cc.Label)],t.prototype,"textGold",void 0),a([f(cc.Label)],t.prototype,"textCurScore",void 0),a([f(cc.Node)],t.prototype,"nodeGoldTextParent",void 0),a([f(cc.Node)],t.prototype,"nodeLevelProgress",void 0),a([f(cc.Node)],t.prototype,"node_addPower",void 0),a([f(cc.Node)],t.prototype,"btn_addPower",void 0),a([f(cc.Node)],t.prototype,"node_newUserPrompt",void 0),a([f(cc.Label)],t.prototype,"text_time",void 0),t=a([u],t)}(r.default);o.default=h,cc._RF.pop()},{"../LevelProgress":"LevelProgress","../UserInfo":"UserInfo","../common/Common":"Common","../manager/GameManager":"GameManager","./ViewBase":"ViewBase"}],BlackViewCtr:[function(e,t,o){"use strict";cc._RF.push(t,"c788f3WNcNLOIJ6NEV2xhOR","BlackViewCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ViewBase"),r=e("../common/Common"),c=cc._decorator,s=c.ccclass,l=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_eventSwallow=null,t}return n(t,e),t.prototype.refreshView=function(e){void 0===e&&(e=!1),cc.director.pause(),r.default.pauseServer=!0},t.prototype.addEvent=function(){r.default.addClickEvent(this.btn_eventSwallow,this.onClick.bind(this),!1)},t.prototype.onClick=function(e){},a([l(cc.Node)],t.prototype,"btn_eventSwallow",void 0),t=a([s],t)}(i.default);o.default=d,cc._RF.pop()},{"../common/Common":"Common","./ViewBase":"ViewBase"}],Bullet:[function(e,t,o){"use strict";cc._RF.push(t,"26616/ZBgtIbq+CBac9SaGl","Bullet");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./common/Define"),r=cc._decorator,c=r.ccclass,s=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isValidBullet=!1,t.moveSpeed=1500,t.targetPos=null,t.newPos=null,t.power=1,t.offsetX=0,t.node_color=null,t}return n(t,e),t.prototype.start=function(){},t.prototype.reset=function(){this.isValidBullet=!0},t.prototype.update=function(e){if(this.isValidBullet){var t=this.newPos.x*this.moveSpeed*e*6,o=this.newPos.y*this.moveSpeed*e;Math.abs(this.node.position.x-this.targetPos.x)<=10&&(t=0),this.node.position=new cc.Vec2(this.node.position.x-t,this.node.position.y-o),this.node.position.y>=1200&&this.setValid(!1)}},t.prototype.shoot=function(e,t){this.node.position=e,this.setValid(!0),this.targetPos=t;var o=this.node.position.x-this.targetPos.x,n=this.node.position.y-this.targetPos.y;this.newPos=new cc.Vec2(o,n),this.newPos.normalizeSelf()},t.prototype.setValid=function(e){this.isValidBullet=e,this.isValidBullet||(this.node.position=new cc.Vec2(-999,-999))},t.prototype.setPower=function(e){if(this.power=e,1==this.power)this.node_color.color=cc.color(0,0,0);else{var t=this.power;t>9&&(t=9),this.node_color.color=i.default.ballColorRGBArr[t]}},a([s(cc.Node)],t.prototype,"node_color",void 0),t=a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./common/Define":"Define"}],ButtonEffect:[function(e,t,o){"use strict";cc._RF.push(t,"1afb2CfehxPyJPpkJtF4T5o","ButtonEffect");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../manager/SoundManager"),r=cc._decorator,c=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isClickEffect=!0,t.isDown=!1,t}return n(t,e),t.prototype.start=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(t){return e.mouseDown(t)}),this.node.on(cc.Node.EventType.TOUCH_END,function(t){return e.mouseEnd(t)}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){return e.mouseEnd(t)}),this.node.on(cc.Node.EventType.MOUSE_DOWN,function(t){return e.mouseDown(t)}),this.node.on(cc.Node.EventType.MOUSE_UP,function(t){return e.mouseEnd(t)}),this.node.on(cc.Node.EventType.MOUSE_LEAVE,function(t){return e.mouseEnd(t)})},t.prototype.mouseDown=function(e){this.isDown=!0,this.isClickEffect&&this.node.runAction(cc.scaleTo(.1,.9)),1==i.default.isSoundOpen?(i.default.pause(),i.default.resume()):(i.default.resume(),i.default.pause())},t.prototype.mouseEnd=function(e){this.isDown&&(this.isDown=!1,null!=this.clickCallBack&&this.clickCallBack(this.node.name),this.isClickEffect&&(this.node.stopAllActions(),this.node.scale=1)),1==i.default.isSoundOpen?(i.default.pause(),i.default.resume()):(i.default.resume(),i.default.pause())},t.prototype.setClickCallBack=function(e,t){void 0===t&&(t=!1),this.clickCallBack=e,this.isClickEffect=t},t=a([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../manager/SoundManager":"SoundManager"}],CannonCtr:[function(e,t,o){"use strict";cc._RF.push(t,"66b4exMdbtFPLDXbh6GmOUL","CannonCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./common/FramaAnimations"),r=e("./common/Define"),c=e("./common/Common"),s=e("./common/FrameAnimation"),l=cc._decorator,d=l.ccclass,u=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wheelCount=1,t.node_body=null,t.node_wheels=null,t}return n(t,e),t.prototype.start=function(){this.cannonAnimas=this.node_body.getComponent(i.default),this.cannonAnimas.init(),this.node.active=!0,this.wheelCount=this.node_wheels.childrenCount,this.playNormal()},t.prototype.openCollision=function(){this.boxCollider=this.node.getComponent(cc.PhysicsBoxCollider),null==this.boxCollider&&(this.rigidBody=this.node.addComponent(cc.RigidBody),this.boxCollider=this.node.addComponent(cc.PhysicsBoxCollider),this.rigidBody.type=cc.RigidBodyType.Dynamic,this.rigidBody.gravityScale=0,this.boxCollider.offset=new cc.Vec2(0,-15),this.boxCollider.size=new cc.Size(35.4,120),this.boxCollider.sensor=!0,this.boxCollider.apply())},t.prototype.playNormal=function(){this.cannonAnimas.Play(0,50),null!=this.roleAddPowerEffect&&(this.roleAddPowerEffect.node.active=!1)},t.prototype.playAttack=function(){this.cannonAnimas.Play(1,20,1,0,cc.callFunc(function(){this.cannonAnimas.Play(0,50)}.bind(this)))},t.prototype.shootBullet=function(e){void 0===e&&(e=!1),null!=this.roleAddPowerEffect&&(this.roleAddPowerEffect.node.active=e)},t.prototype.move=function(e,t,o){if(t){var n=this.node.position;if(Math.abs(n.x-o.x)>=2){var a=n.x-o.x,i=new cc.Vec2(a,n.y);i.normalizeSelf();var c=i.x*r.default.cannonMoveSpeed*e;if((i=new cc.Vec2(this.node.position.x-c,this.node.position.y)).x>=600)i.x=600;else if(i.x<=40)i.x=40;else for(var s=0;s<this.wheelCount;s++)this.node_wheels.children[s].rotation=this.node_wheels.children[s].rotation+-1*c;this.node.position=i}}},t.prototype.die=function(e){c.default.actionTinkColor(this.node_body.children[0].children[0],function(){e()}.bind(this))},t.prototype.addPower=function(e){e?(this.roleAddPowerEffect=cc.instantiate(c.default.addPowerEffect).addComponent(s.default),this.node.addChild(this.roleAddPowerEffect.node),this.roleAddPowerEffect.node.position=new cc.Vec2(0,70),this.roleAddPowerEffect.init(),this.roleAddPowerEffect.Play(30),this.roleAddPowerEffect.node.active=!0):null!=this.roleAddPowerEffect&&(this.roleAddPowerEffect.node.destroy(),this.roleAddPowerEffect=null)},a([u(cc.Node)],t.prototype,"node_body",void 0),a([u(cc.Node)],t.prototype,"node_wheels",void 0),t=a([d],t)}(cc.Component);o.default=f,cc._RF.pop()},{"./common/Common":"Common","./common/Define":"Define","./common/FramaAnimations":"FramaAnimations","./common/FrameAnimation":"FrameAnimation"}],CannonManager:[function(e,t,o){"use strict";cc._RF.push(t,"6eed7atbV9HcqK4hgYFWmC2","CannonManager");var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../CannonCtr"),i=e("./ResManager"),r=cc._decorator,c=r.ccclass,s=(r.property,function(){function e(){}var t;return t=e,e.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},e.createCannon=function(e,t,o){i.default.loadPrefab("prefabs/cannons/cannon"+e.toString(),function(e){var n=cc.instantiate(e).getComponent(a.default);n.node.setParent(t),o(n)}.bind(this))},e.instance=null,e=t=n([c],e)}());o.default=s,cc._RF.pop()},{"../CannonCtr":"CannonCtr","./ResManager":"ResManager"}],Common:[function(e,t,o){"use strict";cc._RF.push(t,"fd92dmfS95Od5f9GBRP7X28","Common"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Define"),a=e("./ButtonEffect"),i=e("../UserInfo"),r=function(){function e(){}return e.resetDatas=function(){this.curLevel=i.default.curLevel,this.curLevelScore=0,this.curLevelGold=i.default.curGold,this.totalShowScore=this.lastShowScore,this.isFirstCreatStone=!0,this.isCanRevive=!0,this.isGod=!1,this.addPower=1},e.getRandom=function(e,t){return Math.floor(Math.random()*(t-e)+e)},e.isCollision=function(e,t,o){var n=e.x-t.x,a=e.y-t.y,i=Math.min(n,t.getContentSize().width/2),r=Math.max(i,-t.getContentSize().width/2),c=Math.min(a,t.getContentSize().height/2),s=Math.max(c,-t.getContentSize().height/2);return(r-n)*(r-n)+(s-a)*(s-a)<=o*o},e.getBulletOffsetX=function(e,t){var o;return e%2==0?(o=Math.floor(e/2))>t?-16*(o-t):16*(e-t):(o=Math.floor(e/2))==t?0:o>t?-25*(o-t):25*(e-t)},e.calculateCubicBezierPoint=function(e,t,o,n){var a=1-e,i=e*e,r=a*a,c=new cc.Vec2(r*t.x,r*t.y),s=2*a*e,l=new cc.Vec2(s*o.x,s*o.y),d=new cc.Vec2(i*n.x,i*n.y);return c=new cc.Vec2(c.x+l.x+d.x,c.y+l.y+d.y)},e.getBeizerList=function(e,t,o,n){for(var a=[],i=1;i<=n;i++){var r=i/n,c=this.calculateCubicBezierPoint(r,e,t,o);a.push(c)}return a},e.getStoneColor=function(e,t){var o=0;if(e>=200)o=t>=200?9:Math.ceil(t/20)-1;else if(e<200&&e>=50){var a=e/10;o=Math.ceil(t/a)-1}else if(e<50&&e>=10){a=e/5;o=Math.ceil(t/a)-1}else if(e<10&&e>=1){a=e/3;o=Math.ceil(t/a)-1}return n.default.ballColorRGBArr[o]},e.addClickEvent=function(e,t,o){(void 0===o&&(o=!0),null!=e)&&e.addComponent(a.default).setClickCallBack(t,o)},e.quickSort=function(e){if(e.length<=1)return e;for(var t=Math.floor(e.length/2),o=e.splice(t,1)[0],n=[],a=[],i=0;i<e.length;i++)e[i]<o?n.push(e[i]):a.push(e[i]);return this.quickSort(n).concat([o],this.quickSort(a))},e.actionLeftRightRotate=function(e,t,o,n){void 0===t&&(t=.2),void 0===o&&(o=5),void 0===n&&(n=2);var a=cc.rotateTo(t,o),i=cc.rotateTo(t,-1*o),r=cc.rotateTo(t,0);e.runAction(cc.repeatForever(cc.sequence(a,i,a,i,r,cc.delayTime(n))))},e.actionTinkColor=function(e,t,o,n){void 0===t&&(t=null),void 0===o&&(o=5),void 0===n&&(n=.1);var a=cc.sequence(cc.tintTo(n,255,0,0),cc.tintTo(n,255,255,255));e.runAction(cc.sequence(cc.repeat(a,o),cc.callFunc(function(){null!=t&&t()}.bind(this))))},e.actionBigSmall=function(e,t,o){var n=cc.sequence(cc.scaleTo(1.2,t),cc.scaleTo(1,o));e.runAction(cc.repeatForever(n))},e.showPrompt=function(e,t){void 0===t&&(t=450),this.nodePrompt.stopAllActions(),this.nodePrompt.active=!0,this.nodePrompt.position=new cc.Vec2(320,t),this.nodePrompt.children[0].getComponent(cc.Label).string=e,this.nodePrompt.setScale(1,0),this.nodePrompt.runAction(cc.sequence(cc.scaleTo(.2,1,1),cc.delayTime(1),cc.scaleTo(.2,1,0),cc.callFunc(function(){this.nodePrompt.active=!1}.bind(this))))},e.getShowNumber=function(e){var t="";e>=1e4?(e=Math.floor(1e-4*e*100)/100,t="w"):e>=1e3&&(e=Math.floor(.001*e*100)/100,t="k");var o=Number(e).toFixed(1).toString();if(-1!=o.search(".")){for(;"0"==o.substr(o.length-1,1);)o=o.substr(0,o.length-1);"."==o.substr(o.length-1,1)&&(o=o.substr(0,o.length-1))}return o+t},e.getMonthWeek=function(e,t,o){var n=new Date(e,parseInt(t)-1,o),a=n.getDay(),i=n.getDate();return Math.ceil((i+6-a)/7)},e.getYearWeek=function(e,t,o){var n=new Date(e,parseInt(t)-1,o),a=new Date(e,0,1),i=Math.round((n.valueOf()-a.valueOf())/864e5);return Math.ceil((i+(a.getDay()+1-1))/7)},e.compile=function(e){for(var t=String.fromCharCode(e.charCodeAt(0)+e.length),o=1;o<e.length;o++)t+=String.fromCharCode(e.charCodeAt(o)+e.charCodeAt(o-1));return t},e.uncompile=function(e){for(var t=String.fromCharCode(e.charCodeAt(0)-e.length),o=1;o<e.length;o++)t+=String.fromCharCode(e.charCodeAt(o)-t.charCodeAt(o-1));return t},e.addPower=1,e.pauseServer=!1,e.shootCount=3,e.bulletWidth=25,e.isFirstCreatStone=!0,e.isPlaying=!1,e.isPause=!1,e.isGameOver=!1,e.isOpenSound=!0,e.isCanRevive=!0,e.isGod=!1,e.offLineRewardCount=0,e.isShowGoldFlyEffect=!1,e.isInMainViewLogin=!0,e.curUseCannonId=0,e.curLevelScore=0,e.maxLevelScore=0,e.totalShowScore=0,e.curLevel=0,e.curLevelGold=0,e.lastShowScore=0,e}();o.default=r,cc._RF.pop()},{"../UserInfo":"UserInfo","./ButtonEffect":"ButtonEffect","./Define":"Define"}],Define:[function(e,t,o){"use strict";cc._RF.push(t,"19e1aTBWAxFC7/GsqylnuDD","Define"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.left=0,e.right=1,e.center=2,e.down=3,e.up=4,e.cannonDefault=1,e.cannonVideo=2,e.cannonTotalScore=3,e.cannonDropGoldLevel=4,e.cannonShare=5,e.cannonOffLine=6,e.cannonMoveSpeed=5e3,e.strVersion="1.2.5",e.gameId="001",e.strIp="https://fullfire.hottoogame.com",e.strPort="",e.bulletMacCount=18,e.groupDefult="default",e.groupWall="wall",e.groupBall="ball",e.groupBullet="bullet",e.groupMoveBall="moveBall",e.ballBreakOffsetX=60,e.ballBreakOffsetY=150,e.ballMaxCount=3,e.ballRestitutionMaxArr=[700,770,840,1300*.7],e.ballColorRGBArr=[new cc.Color(113,211,62),new cc.Color(42,216,195),new cc.Color(29,197,204),new cc.Color(31,129,218),new cc.Color(37,49,197),new cc.Color(86,37,204),new cc.Color(122,36,211),new cc.Color(164,29,204),new cc.Color(228,25,138),new cc.Color(231,45,45)],e.goldTextRGBArr=[new cc.Color(255,242,11),new cc.Color(63,235,170),new cc.Color(46,197,252),new cc.Color(43,100,255),new cc.Color(255,97,244),new cc.Color(255,74,77)],e.loadTypePrefab=0,e.viewUrl=["MainView","UpgradeView","BattleView","GameResultView","RankingView","ReviveView","GameWinView","OffLineRewardView","SelectCannonView","BlackView","SelectSceneView"],e.viewMain=0,e.viewUpgrade=1,e.viewBattle=2,e.viewGameResult=3,e.viewRanking=4,e.viewRevive=5,e.viewGameWin=6,e.viewOffLineReward=7,e.viewSelectCannon=8,e.viewBlack=9,e.viewSelectScene=10,e.dataKeyGold="dataKeyGold",e.dataKeyLevel="dataKeyLevel",e.dataKeyShootCount="dataKeyShootCount",e.dataKeyMaxScore="dataKeyMaxScore",e.dataKeyFirePower="dataKeyFirePower",e.dataKeyGoldDropLevel="dataKeyGoldDropLevel",e.dataKeyOffLine="dataKeyOffLine",e.dataKeyLastQuitTime="dataKeyLastQuitTime",e.datakeyDate="datakeyDate",e.datakeyCannon="datakeyCannon",e.dataKeyTotalScore="dataKeyTotalScore",e.dataKeyCurUseCannonId="dataKeyCurUseCannonId",e.dataKeyBrate="dataKeyBrate",e.datakeyShowAddHomeTag="datakeyShowAddHomeTag",e.datakeyScene="datakeyScene",e.soundBackgound=0,e.effectParticleToground=0,e.soundBullet=0,e.soundButton=1,e.soundGetcoin=2,e.soundStonebomb=3,e.soundStonetoground=4,e}();o.default=n,cc._RF.pop()},{}],FramaAnimations:[function(e,t,o){"use strict";cc._RF.push(t,"cd960M+oPlOA46IO//KtmHM","FramaAnimations");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./FrameAnimation"),r=cc._decorator,c=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curPlayIndex=0,t}return n(t,e),t.prototype.init=function(){for(var e=0;e<this.node.childrenCount;e++)this.node.children[e].getComponent(i.default).init()},t.prototype.Play=function(e,t,o,n,a){void 0===t&&(t=20),void 0===o&&(o=-1),void 0===n&&(n=0),void 0===a&&(a=null),this.node.children[this.curPlayIndex].getComponent(i.default).stop(),this.curPlayIndex=e,this.node.children[this.curPlayIndex].getComponent(i.default).Play(t,o,n,a)},t.prototype.setPlaySpeed=function(e){void 0===e&&(e=20),this.node.children[this.curPlayIndex].getComponent(i.default).setPlaySpeed(e)},t.prototype.setLoopCallBack=function(e){this.node.children[this.curPlayIndex].getComponent(i.default).setLoopCallBack(e)},t.prototype.stop=function(){this.node.children[this.curPlayIndex].getComponent(i.default).stop()},t.prototype.resume=function(){this.node.children[this.curPlayIndex].getComponent(i.default).resume()},t=a([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{"./FrameAnimation":"FrameAnimation"}],FrameAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"a1afbrq6LlK/4xrv5Pf7p6Z","FrameAnimation");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxFrame=0,t.curFrame=0,t.startFrame=0,t.playSpeed=200,t.totalTime=0,t.isPause=!0,t.callBack=null,t.loopCallBack=null,t.loopCount=-1,t}return n(t,e),t.prototype.init=function(){this.maxFrame=this.node.children.length;for(var e=0;e<this.maxFrame;e++)this.node.children[e].active=!1},t.prototype.update=function(e){this.isPause||(this.totalTime=this.totalTime+1e3*e,this.totalTime>=this.playSpeed&&(this.nextFrame(),this.totalTime=0))},t.prototype.nextFrame=function(){this.curFrame=this.curFrame+1,this.curFrame>=this.maxFrame&&(this.curFrame=this.startFrame,null!=this.loopCallBack&&this.node.runAction(this.loopCallBack),-1!=this.loopCount&&(this.loopCount--,this.loopCount<=0&&(this.isPause=!0,null!=this.callBack&&this.node.runAction(this.callBack))));for(var e=0;e<this.node.children.length;e++)this.curFrame==e?this.node.children[e].active=!0:this.node.children[e].active=!1},t.prototype.Play=function(e,t,o,n){void 0===e&&(e=20),void 0===t&&(t=-1),void 0===o&&(o=0),void 0===n&&(n=null),this.playSpeed=e,this.loopCount=t,this.startFrame=o,this.curFrame=o,this.callBack=n,this.isPause=!1,this.node.children[this.curFrame].active=!0,this.node.active=!0},t.prototype.setPlaySpeed=function(e){void 0===e&&(e=20),this.playSpeed=e},t.prototype.setLoopCallBack=function(e){this.loopCallBack=e},t.prototype.stop=function(){this.isPause=!0,this.node.active=!1},t.prototype.resume=function(){this.node.active=!0},t.prototype.tempCallBack=function(){},t=a([r],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],GameManager:[function(e,t,o){"use strict";cc._RF.push(t,"84617ZM2PxCnpekpVN/UQbG","GameManager");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Ball"),r=e("../common/Define"),c=e("../Shake"),s=e("../common/Common"),l=e("../Bullet"),d=e("../UserInfo"),u=e("../Levellnfo"),f=e("./TimeTaskManager"),h=e("./UIManager"),p=e("../datas/LDataGoldManager"),g=e("../datas/LDataStoncolourManager"),v=e("../datas/LDataStoneManager"),m=e("../GoldCtr"),y=e("./ParticleEffectManager"),w=e("./CannonManager"),_=e("../datas/LDataCannonManager"),C=e("./ResManager"),b=e("../datas/LDataSceneManager"),S=e("./SoundManager"),I=cc._decorator,P=I.ccclass,x=I.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeBalls=null,t.nodeGolds=null,t.nodeParticleEffects=null,t.nodeBg=null,t.nodeGameRoot=null,t.nodeUiRoot=null,t.nodeGold=null,t.nodeBallRoot=null,t.nodeGoldRoot=null,t.nodePrompt=null,t.display=null,t.textAddGold=null,t.addPowerEffect=null,t.sceneBgs=null,t.nodeSoundRoot=null,t.sceneObjs=null,t.wxHelper=null,t.bgInitPos=null,t.isCanMoveCannon=!1,t.moveToPos=null,t.totalShootTime=0,t.totalShootCount=0,t.bulletArr=[],t.ballArr=[],t.goldArr=[],t.totalShootAnimaTime=0,t.curCannonCtr=null,t.nodeBullet=null,t.isCanShakeBg=!0,t}var o;return n(t,e),o=t,t.prototype.newMethod=function(){return null},t.prototype.start=function(){var e=this;p.default.GetDataById(0),g.default.GetDataById(0),v.default.GetDataById(0),_.default.GetDataById(0),b.default.GetDataById(0),d.default.loadAllData(),o.instance=this,this.nodeBg.getParent().on(cc.Node.EventType.TOUCH_START,function(t){return e.mouseDown(t)}),this.nodeBg.getParent().on(cc.Node.EventType.TOUCH_MOVE,function(t){return e.mouseMove(t)}),this.nodeBg.getParent().on(cc.Node.EventType.TOUCH_END,function(t){return e.mouseEnd(t)}),this.nodeBg.getParent().on(cc.Node.EventType.TOUCH_CANCEL,function(t){return e.mouseEnd(t)}),this.nodeBg.getParent().on(cc.Node.EventType.MOUSE_DOWN,function(t){return e.mouseDown(t)}),this.nodeBg.getParent().on(cc.Node.EventType.MOUSE_MOVE,function(t){return e.mouseMove(t)}),this.nodeBg.getParent().on(cc.Node.EventType.MOUSE_UP,function(t){return e.mouseEnd(t)}),cc.game.on(cc.game.EVENT_HIDE,this.gameEventHide),cc.game.on(cc.game.EVENT_SHOW,this.gameEventShow),cc.game.on(cc.game.EVENT_ENGINE_INITED,this.gameEventShow),this.changeCannonById(d.default.curUseCannonId),f.default.addTimeTask(3.5,this.createStone.bind(this)),this.bgInitPos=this.nodeBg.position,s.default.isFirstCreatStone=!0,s.default.nodeGameRoot=this.nodeGameRoot,s.default.nodeUiRoot=this.nodeUiRoot,s.default.nodeBallRoot=this.nodeBallRoot,s.default.nodeGoldRoot=this.nodeGoldRoot,s.default.nodeParticleEffects=this.nodeParticleEffects,s.default.nodePrompt=this.nodePrompt,s.default.nodeAddGold=this.textAddGold,s.default.addPowerEffect=this.addPowerEffect,s.default.nodeSoundRoot=this.nodeSoundRoot,s.default.offLineRewardCount=u.default.getOffLineRewardGoldCount(),this.changeSceneByIndex(d.default.getCurSceneIndex(),!0),S.default.palySoundById(r.default.soundBackgound,!0),this.enterGame()},t.prototype.enterGame=function(){s.default.offLineRewardCount>20?(h.default.getInstance().showView(r.default.viewOffLineReward),h.default.getInstance().showView(r.default.viewUpgrade)):(h.default.getInstance().showView(r.default.viewMain),h.default.getInstance().showView(r.default.viewUpgrade))},t.prototype.changeCannonById=function(e){void 0===e&&(e=0);var t=new cc.Vec2(320,280);null!=this.curCannonCtr&&(t=this.curCannonCtr.node.position,this.curCannonCtr.node.destroy()),s.default.curUseCannonId=e,s.default.curDataCannon=_.default.GetDataById(s.default.curUseCannonId),w.default.createCannon(e,this.nodeGameRoot,function(e){this.curCannonCtr=e,this.curCannonCtr.node.position=t,this.curCannonCtr.node.setSiblingIndex(2),this.removeAllBullet(),C.default.loadPrefab("prefabs/bullets/bullet"+s.default.curDataCannon.bulletsId.toString(),function(e){this.nodeBullet=e}.bind(this))}.bind(this))},t.prototype.changeSceneByIndex=function(e,t){void 0===t&&(t=!1);for(var o=0;o<this.sceneBgs.childrenCount;o++)this.sceneBgs.children[o].active=!1;this.sceneBgs.children[e].active=!0,this.sceneObjs.active=0==e},t.prototype.mouseDown=function(e){this.isCanMoveCannon=!0,this.moveToPos=e.getLocation(),1==S.default.isSoundOpen?(S.default.pause(),S.default.resume()):(S.default.resume(),S.default.pause())},t.prototype.mouseMove=function(e){this.isCanMoveCannon&&(this.moveToPos=e.getLocation())},t.prototype.mouseEnd=function(e){this.isCanMoveCannon=!1,this.curCannonCtr.shootBullet(!1),1==S.default.isSoundOpen?(S.default.pause(),S.default.resume()):(S.default.resume(),S.default.pause())},t.prototype.cannonMove=function(e){this.isCanMoveCannon&&(this.curCannonCtr.move(e,this.isCanMoveCannon,this.moveToPos),this.shootBullet(e),this.curCannonCtr.shootBullet(!0))},t.prototype.shootBullet=function(e){var t=d.default.bulletShootMaxCount*s.default.addPower;if(!(this.getCurValidBulletCount()>=t)){this.totalShootTime=this.totalShootTime+e,t>=10?(this.totalShootAnimaTime=this.totalShootAnimaTime+e,this.totalShootAnimaTime>.1&&(this.totalShootAnimaTime=0,this.curCannonCtr.playAttack())):this.totalShootTime>1/t&&this.curCannonCtr.playAttack();var o=t;if(o>=r.default.bulletMacCount&&(o=r.default.bulletMacCount),this.totalShootTime>1/o){this.totalShootCount++;var n=Math.floor(t/r.default.bulletMacCount),a=Math.floor(t%r.default.bulletMacCount);this.totalShootCount<=a&&(n+=1),n<=0&&(n=1);var i=d.default.addFirePower;this.totalShootCount<d.default.addFirePowerCount&&(i+=1);for(var c=0;c<n;c++){var l=s.default.getBulletOffsetX(n,c),u=this.getBullet(),f=new cc.Vec2(this.curCannonCtr.node.position.x,this.curCannonCtr.node.position.y+50),h=new cc.Vec2(this.curCannonCtr.node.position.x+l,this.curCannonCtr.node.position.y+1136);u.setPower(i),u.shoot(f,h)}this.totalShootTime=0}this.totalShootCount>o&&(this.totalShootCount=0)}},t.prototype.ShakeBg=function(e){void 0===e&&(e=5),this.isCanShakeBg&&(this.isCanShakeBg=!1,this.nodeBg.runAction(cc.sequence(c.default.create(.2,e,e),cc.callFunc(function(){this.nodeBg.position=this.bgInitPos,this.isCanShakeBg=!0}.bind(this)))))},t.prototype.getBullet=function(){for(var e=null,t=0;t<this.bulletArr.length;t++)this.bulletArr[t].isValidBullet||(e=this.bulletArr[t]);return null==e&&(e=cc.instantiate(this.nodeBullet).getComponent(l.default),s.default.nodeBallRoot.addChild(e.node),this.bulletArr.push(e)),e.power=1,e},t.prototype.removeAllBullet=function(){for(var e=0;e<this.bulletArr.length;e++)this.bulletArr[e].node.destroy();this.bulletArr=[]},t.prototype.getCurValidBulletCount=function(){for(var e=0,t=0;t<this.bulletArr.length;t++)this.bulletArr[t].isValidBullet&&e++;return e},t.prototype.update=function(e){s.default.isPause||s.default.isGameOver||!s.default.isPlaying||(this.cannonMove(e),this.handlerBulletCollision(),f.default.updateTime(e))},t.prototype.handlerBulletCollision=function(){for(var e=0;e<this.bulletArr.length;e++)this.bulletArr[e].isValidBullet&&this.checkIsBulletCollision(this.bulletArr[e])},t.prototype.checkIsBulletCollision=function(e){for(var t=0;t<this.ballArr.length;t++){var o=this.ballArr[t];if(s.default.isCollision(o.node,e.node,o.stoneData.radius)&&(e.setValid(!1),o.Hit(e.power),s.default.totalShowScore=s.default.totalShowScore+e.power,d.default.totalScore=d.default.totalScore+e.power,h.default.getInstance().executeEvent(r.default.viewBattle,"refreshScore"),o.getNumber()<=0)){0==o.stoneData.stonId&&(s.default.curLevelScore++,h.default.getInstance().executeEvent(r.default.viewBattle,"refreshProgressInfo"),console.log("\u91d1\u5e01\u6389\u843d................"),this.handlerGoldDrop(o.node.position),u.default.isFinishLevel()&&(console.log("\u5df2\u7ecf\u901a\u8fc7\u4e86\u5173\u5361\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002"),this.handlerCollectAllGold(),s.default.isPlaying=!1,h.default.getInstance().executeEvent(r.default.viewBattle,"hideAddPower"),h.default.getInstance().showView(r.default.viewGameWin),d.default.saveNextLevel())),this.ballArr.splice(t,1),this.stoneBreakCallBack(o),o.node.destroy(),o=null;break}}},t.prototype.checkIsExsitMaxStone=function(){for(var e=0;e<this.ballArr.length;e++)if(3==this.ballArr[e].stoneId)return!0;return!1},t.prototype.createStone=function(e,t,o,n,a){if(void 0===t&&(t=0),void 0===o&&(o=-1),void 0===n&&(n=null),void 0===a&&(a=0),!s.default.isPause&&!s.default.isGameOver&&s.default.isPlaying)if(u.default.isCanCreateStone()||"stoneBreak"==e){if(!((this.checkIsExsitMaxStone()||this.ballArr.length>r.default.ballMaxCount)&&"stoneBreak"!=e||"stoneBreak"!=e&&null==(o=u.default.getStoneId()))){var c=cc.instantiate(this.nodeBalls.children[o]).getComponent(i.default);if(c.stoneId=o,s.default.nodeBallRoot.addChild(c.node),"stoneBreak"==e)c.appear(r.default.center,t,n),c.setNumber(a);else{var l=u.default.getStoneScore(s.default.isFirstCreatStone);s.default.isFirstCreatStone=!1,c.setNumber(l),c.appear(s.default.getRandom(0,2),t,n,u.default.getStoneInitY())}this.ballArr.push(c)}}else console.log("\u5df2\u7ecf\u521b\u5efa\u5230\u6700\u5927\u4e86\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002")},t.prototype.stoneBreakCallBack=function(e){y.default.getInstance().showParticleEffect(3,e.node.position,.5).node.scale=e.stoneData.radius/40,e.stoneId>0&&(this.createStone("stoneBreak",r.default.left,e.stoneId-1,e.node.position,e.getBreakScore()),this.createStone("stoneBreak",r.default.right,e.stoneId-1,e.node.position,e.getBreakScore()))},t.prototype.handlerGoldDrop=function(e){var t=u.default.getDropGoldCount();if(t>=0)for(var o=0;o<t;o++){var n=u.default.getDropGoldId();this.getGold(n,e)}},t.prototype.getGold=function(e,t){for(var o=null,n=0;n<this.goldArr.length;n++)this.goldArr[n].isCanUseTag&&(o=this.goldArr[n]);null==o&&(o=cc.instantiate(this.nodeGold).getComponent(m.default),s.default.nodeGoldRoot.addChild(o.node),this.goldArr.push(o)),o.node.position=t,o.setGoldId(e);var a=this.nodeGolds.children[e].getComponent(cc.Sprite).spriteFrame;return o.setIcon(a),o},t.prototype.handlerCollectAllGold=function(){for(var e=0;e<this.goldArr.length;e++)this.goldArr[e].autoCollect()},t.prototype.handlerCollectGold=function(e){d.default.curGold=d.default.curGold+e,h.default.getInstance().executeEvent(r.default.viewBattle,"refreshGold")},t.prototype.removeAllStone=function(){for(var e=0;e<this.ballArr.length;e++)this.ballArr[e].node.destroy(),this.ballArr[e]=null;this.ballArr=[]},t.prototype.clearAllGold=function(){for(var e=0;e<this.goldArr.length;e++)this.goldArr[e].clear()},t.prototype.restartGame=function(){this.removeAllStone(),this.curCannonCtr.openCollision(),u.default.InitLevelStoneInfo(),s.default.resetDatas(),h.default.getInstance().refreshView(r.default.viewBattle),s.default.isGameOver=!1,s.default.isPause=!1,s.default.isPlaying=!0,this.createStone("")},t.prototype.exitGame=function(){s.default.lastShowScore=0,this.removeAllStone(),this.clearAllGold()},t.prototype.gameOver=function(e){if(null!=e){if(s.default.isGameOver)return;s.default.isGameOver=!0,this.pauseStoneMove(!0),this.showGameOverEffect()}else d.default.saveGoldData(),this.exitGame(),h.default.getInstance().executeEvent(r.default.viewBattle,"hideAddPower"),h.default.getInstance().showView(r.default.viewGameResult)},t.prototype.showGameOverEffect=function(){this.curCannonCtr.die(function(){s.default.isCanRevive?(s.default.isCanRevive=!1,h.default.getInstance().executeEvent(r.default.viewBattle,"hideAddPower"),h.default.getInstance().showView(r.default.viewRevive)):(d.default.saveGoldData(),this.exitGame(),h.default.getInstance().executeEvent(r.default.viewBattle,"hideAddPower"),h.default.getInstance().showView(r.default.viewGameResult))}.bind(this))},t.prototype.reviveGame=function(){d.default.god(3),this.pauseStoneMove(!1),s.default.isGameOver=!1},t.prototype.pauseStoneMove=function(e){for(var t=0;t<this.ballArr.length;t++)this.ballArr[t].pauseMove(e)},t.prototype.gameEventHide=function(){console.log("gameEventHide"),cc.director.pause(),d.default.saveLastQuitTime()},t.prototype.gameEventShow=function(){console.log("gameEventShow"),cc.director.isPaused()&&cc.director.resume(),h.default.getInstance().isShow(r.default.viewSelectCannon)?h.default.getInstance().executeEvent(r.default.viewSelectCannon):h.default.getInstance().isShow(r.default.viewUpgrade)?h.default.getInstance().executeEvent(r.default.viewUpgrade):h.default.getInstance().isShow(r.default.viewBattle)?h.default.getInstance().executeEvent(r.default.viewBattle,"share"):h.default.getInstance().isShow(r.default.viewSelectScene)&&h.default.getInstance().executeEvent(r.default.viewSelectScene)},t.instance=null,a([x(cc.Node)],t.prototype,"nodeBalls",void 0),a([x(cc.Node)],t.prototype,"nodeGolds",void 0),a([x(cc.Node)],t.prototype,"nodeParticleEffects",void 0),a([x(cc.Node)],t.prototype,"nodeBg",void 0),a([x(cc.Node)],t.prototype,"nodeGameRoot",void 0),a([x(cc.Node)],t.prototype,"nodeUiRoot",void 0),a([x(cc.Node)],t.prototype,"nodeGold",void 0),a([x(cc.Node)],t.prototype,"nodeBallRoot",void 0),a([x(cc.Node)],t.prototype,"nodeGoldRoot",void 0),a([x(cc.Node)],t.prototype,"nodePrompt",void 0),a([x(cc.Sprite)],t.prototype,"display",void 0),a([x(cc.Node)],t.prototype,"textAddGold",void 0),a([x(cc.Node)],t.prototype,"addPowerEffect",void 0),a([x(cc.Node)],t.prototype,"sceneBgs",void 0),a([x(cc.Node)],t.prototype,"nodeSoundRoot",void 0),a([x(cc.Node)],t.prototype,"sceneObjs",void 0),t=o=a([P],t)}(cc.Component);o.default=M,cc._RF.pop()},{"../Ball":"Ball","../Bullet":"Bullet","../GoldCtr":"GoldCtr","../Levellnfo":"Levellnfo","../Shake":"Shake","../UserInfo":"UserInfo","../common/Common":"Common","../common/Define":"Define","../datas/LDataCannonManager":"LDataCannonManager","../datas/LDataGoldManager":"LDataGoldManager","../datas/LDataSceneManager":"LDataSceneManager","../datas/LDataStoncolourManager":"LDataStoncolourManager","../datas/LDataStoneManager":"LDataStoneManager","./CannonManager":"CannonManager","./ParticleEffectManager":"ParticleEffectManager","./ResManager":"ResManager","./SoundManager":"SoundManager","./TimeTaskManager":"TimeTaskManager","./UIManager":"UIManager"}],GameResultCtr:[function(e,t,o){"use strict";cc._RF.push(t,"942fbawwYZIn4wJMCNVS/7s","GameResultCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ViewBase"),r=e("../LevelProgress"),c=e("../common/Common"),s=e("../UserInfo"),l=e("../manager/UIManager"),d=e("../common/Define"),u=e("../manager/SoundManager"),f=cc._decorator,h=f.ccclass,p=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textCurSocre=null,t.textMaxScore=null,t.textFinishProgress=null,t.nodeLevelProgress=null,t.btn_getReward=null,t.textRewardCount=null,t.nodeClickContinue=null,t}return n(t,e),t.prototype.refreshView=function(e){void 0===e&&(e=!1),this.nodeLevelProgress.setLevelProgressInfo(c.default.curLevel,c.default.maxLevelScore),this.nodeLevelProgress.setProgress(c.default.curLevelScore),this.textMaxScore.string=s.default.maxScore.toString(),this.textCurSocre.string=c.default.totalShowScore.toString();var t=Math.floor(c.default.curLevelScore/c.default.maxLevelScore*100).toString();this.textFinishProgress.string=t+"% completed",s.default.saveTotalScore(),this.nodeClickContinue.stopAllActions(),c.default.actionBigSmall(this.nodeClickContinue,.9,1)},t.prototype.showActionCallBack=function(){},t.prototype.addEvent=function(){c.default.addClickEvent(this.btn_getReward,this.onClick.bind(this)),c.default.addClickEvent(this.node.children[0],this.onClick.bind(this),!1)},t.prototype.initView=function(){this.showActionType=d.default.left},t.prototype.onClick=function(e){var t=MiniGameAds.isInterstitialReady();u.default.pause(),t?MiniGameAds.showInterstitial().then(function(){console.info("====> show interstitial success"),u.default.resume(),l.default.getInstance().showView(d.default.viewMain),l.default.getInstance().showView(d.default.viewUpgrade),l.default.getInstance().hideView(d.default.viewBattle),l.default.getInstance().hideView(d.default.viewGameResult)}).catch(function(e){console.error("====> show interstitial error: "+e.message),u.default.resume(),l.default.getInstance().showView(d.default.viewMain),l.default.getInstance().showView(d.default.viewUpgrade),l.default.getInstance().hideView(d.default.viewBattle),l.default.getInstance().hideView(d.default.viewGameResult)}):(console.info("====> interstitial not ready"),u.default.resume(),l.default.getInstance().showView(d.default.viewMain),l.default.getInstance().showView(d.default.viewUpgrade),l.default.getInstance().hideView(d.default.viewBattle),l.default.getInstance().hideView(d.default.viewGameResult))},a([p(cc.Label)],t.prototype,"textCurSocre",void 0),a([p(cc.Label)],t.prototype,"textMaxScore",void 0),a([p(cc.Label)],t.prototype,"textFinishProgress",void 0),a([p(r.default)],t.prototype,"nodeLevelProgress",void 0),a([p(cc.Node)],t.prototype,"btn_getReward",void 0),a([p(cc.Label)],t.prototype,"textRewardCount",void 0),a([p(cc.Node)],t.prototype,"nodeClickContinue",void 0),t=a([h],t)}(i.default);o.default=g,cc._RF.pop()},{"../LevelProgress":"LevelProgress","../UserInfo":"UserInfo","../common/Common":"Common","../common/Define":"Define","../manager/SoundManager":"SoundManager","../manager/UIManager":"UIManager","./ViewBase":"ViewBase"}],GameWinViewCtr:[function(e,t,o){"use strict";cc._RF.push(t,"5a35eO++ydDqroFYRGctjVH","GameWinViewCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ViewBase"),r=e("../common/Common"),c=e("../common/Define"),s=e("../manager/UIManager"),l=e("../manager/GameManager"),d=e("../UserInfo"),u=e("../manager/ParticleEffectManager"),f=e("../manager/SoundManager"),h=cc._decorator,p=h.ccclass,g=h.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeCenter=null,t.textFinishProgress=null,t.nodeBg=null,t.nodeClickContinue=null,t}return n(t,e),t.prototype.refreshView=function(e){void 0===e&&(e=!1),this.textFinishProgress.string="Congratulations, level "+r.default.curLevel.toString()+" completed",d.default.saveGoldData(),this.textFinishProgress.node.stopAllActions(),r.default.actionTinkColor(this.textFinishProgress.node,null,1e4,.3),r.default.lastShowScore=r.default.totalShowScore,d.default.saveTotalScore(),this.nodeClickContinue.stopAllActions(),r.default.actionBigSmall(this.nodeClickContinue,.9,1)},t.prototype.addEvent=function(){r.default.addClickEvent(this.nodeBg,this.onClick.bind(this),!1)},t.prototype.onClick=function(e){var t=MiniGameAds.isInterstitialReady();f.default.pause(),t?MiniGameAds.showInterstitial().then(function(){console.info("====> show interstitial success"),f.default.resume(),s.default.getInstance().hideView(c.default.viewUpgrade),s.default.getInstance().hideView(c.default.viewGameWin),s.default.getInstance().showView(c.default.viewBattle),r.default.isPlaying=!0,l.default.instance.restartGame()}).catch(function(e){console.error("====> show interstitial error: "+e.message),f.default.resume(),s.default.getInstance().hideView(c.default.viewUpgrade),s.default.getInstance().hideView(c.default.viewGameWin),s.default.getInstance().showView(c.default.viewBattle),r.default.isPlaying=!0,l.default.instance.restartGame()}):(console.info("====> interstitial not ready"),f.default.resume(),s.default.getInstance().hideView(c.default.viewUpgrade),s.default.getInstance().hideView(c.default.viewGameWin),s.default.getInstance().showView(c.default.viewBattle),r.default.isPlaying=!0,l.default.instance.restartGame())},t.prototype.initView=function(){this.showActionType=c.default.left},t.prototype.showActionCallBack=function(){s.default.getInstance().showView(c.default.viewUpgrade),u.default.getInstance().showParticleEffect(1,new cc.Vec2(320,1e3),5,null,this.node)},a([g(cc.Node)],t.prototype,"nodeCenter",void 0),a([g(cc.Label)],t.prototype,"textFinishProgress",void 0),a([g(cc.Node)],t.prototype,"nodeBg",void 0),a([g(cc.Node)],t.prototype,"nodeClickContinue",void 0),t=a([p],t)}(i.default);o.default=v,cc._RF.pop()},{"../UserInfo":"UserInfo","../common/Common":"Common","../common/Define":"Define","../manager/GameManager":"GameManager","../manager/ParticleEffectManager":"ParticleEffectManager","../manager/SoundManager":"SoundManager","../manager/UIManager":"UIManager","./ViewBase":"ViewBase"}],GoldCtr:[function(e,t,o){"use strict";cc._RF.push(t,"1bf3clzsEtFKYmdDolC0+UM","GoldCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./datas/LDataGoldManager"),r=e("./common/Common"),c=e("./manager/GameManager"),s=e("./common/Define"),l=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goldCount=0,t.isCanCollect=!0,t.isCanFly=!0,t.isCanUseTag=!1,t.goldId=0,t}return n(t,e),t.prototype.onLoad=function(){this.rigidBody=this.node.getComponent(cc.RigidBody),this.rigidBody.active=!1},t.prototype.setGoldId=function(e){this.node.setScale(1,1),this.goldCount=i.default.GetDataById(e).goldnumber,this.isCanUseTag=!1,this.isCanCollect=!0,this.isCanFly=!0,this.node.active=!0,this.rigidBody.gravityScale=1,this.goldId=e,0==r.default.getRandom(0,2)?this.rigidBody.linearVelocity=cc.v2(-1*r.default.getRandom(100,350),r.default.getRandom(100,350)):this.rigidBody.linearVelocity=cc.v2(r.default.getRandom(100,350),r.default.getRandom(100,350))},t.prototype.onBeginContact=function(e,t,o){0==o.node.name.indexOf("cannon")&&this.isCanCollect&&(this.isCanCollect=!1,this.showTextEffect())},t.prototype.showTextEffect=function(){var e=cc.instantiate(r.default.nodeAddGold);this.node.getParent().addChild(e),e.position=this.node.position,e.active=!0,e.getComponent(cc.Label).string="+"+this.goldCount.toString();var t=e.position.x,o=e.position.y,n=cc.sequence(cc.moveTo(.8,new cc.Vec2(t,o+r.default.getRandom(200,250))),cc.callFunc(function(){e.destroy()}));e.runAction(n),e.color=s.default.goldTextRGBArr[this.goldId],r.default.actionLeftRightRotate(e)},t.prototype.update=function(e){this.isCanCollect?this.rigidBody.active=!0:(this.rigidBody.active=!1,this.isCanFly&&this.fly())},t.prototype.fly=function(){c.default.instance.handlerCollectGold(this.goldCount),this.node.setScale(.5,.5),this.node.runAction(cc.sequence(cc.moveTo(.5,new cc.Vec2(50,1085)).easing(cc.easeIn(1)),cc.callFunc(function(){this.isCanUseTag=!0,this.node.active=!1}.bind(this)))),this.isCanFly=!1},t.prototype.setIcon=function(e){this.node.getComponent(cc.Sprite).spriteFrame=e},t.prototype.autoCollect=function(){this.isCanUseTag||(this.isCanCollect=!1)},t.prototype.clear=function(){this.isCanCollect=!1,this.isCanUseTag=!0,this.node.active=!1},t.goldTextArr=[],t=a([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./common/Common":"Common","./common/Define":"Define","./datas/LDataGoldManager":"LDataGoldManager","./manager/GameManager":"GameManager"}],HttpManager:[function(e,t,o){"use strict";cc._RF.push(t,"6b3dfhuZ4lNLrGaNQNeMfOj","HttpManager");var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../common/Common"),i=e("../UserInfo"),r=e("../PlayerData"),c=e("./UIManager"),s=e("../common/Define"),l=cc._decorator,d=l.ccclass,u=(l.property,function(){function e(){}var t;return t=e,e.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},e.prototype.httpGets=function(e,t){var o=cc.loader.getXMLHttpRequest();o.onreadystatechange=function(){if(4===o.readyState&&o.status>=200&&o.status<300){var e=o.responseText;t(e)}},o.open("GET",e,!0),cc.sys.isNative&&o.setRequestHeader("Access-Control-Allow-Origin","*"),o.timeout=5e3,o.send()},e.prototype.httpPost=function(e,t,o){var n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(4==n.readyState)if(console.log("xhr.readyState="+n.readyState+"  xhr.status="+n.status),n.status>=200&&n.status<300){var e=n.responseText;o(e)}else o(-1)},n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.timeout=5e3,console.log("send"),n.send(t)},e.prototype.loginWX=function(e){var o="code="+e;console.log("\u5f00\u59cb\u6267\u884c\u767b\u9646\u81ea\u5df1\u7684\u670d\u52a1\u5668 netData = "+o),t.getInstance().httpPost(s.default.strIp+s.default.strPort+"/users/loginWX",o,function(e){console.log("\u670d\u52a1\u5668\u56de\u8c03"),console.log(e);var o=JSON.parse(e);i.default.openid=o.openid,i.default.serverMaxScore=o.score,console.log("UserInfo.openid"+i.default.openid),console.log("UserInfo.serverMaxScore"+i.default.serverMaxScore),console.log("UserInfo.maxScore"+i.default.maxScore),i.default.maxScore>i.default.serverMaxScore&&t.getInstance().submitUserInfo(),a.default.isInMainViewLogin||(t.getInstance().submitUserInfo(),c.default.getInstance().refreshView(s.default.viewRanking))}.bind(this))},e.prototype.submitUserInfo=function(){if(console.log("submitUserInfo 00  UserInfo.openid = "+i.default.openid),""!=i.default.openid&&(console.log("submitUserInfo 00  UserInfo.maxScore = "+i.default.maxScore),console.log("submitUserInfo 00  UserInfo.serverMaxScore = "+i.default.serverMaxScore),!(i.default.maxScore<=i.default.serverMaxScore))){i.default.serverMaxScore=i.default.maxScore;var e="openid="+i.default.openid;e=(e=(e=e+"&avatarUrl="+i.default.avatarUrl)+"&nickName="+i.default.nickName)+"&score="+i.default.maxScore,console.log("netData = "+e),t.getInstance().httpPost(s.default.strIp+s.default.strPort+"/users/submitInfo",e,function(e){console.log("submitUserInfo \u6570\u636e\u6210\u529f")}.bind(this))}},e.prototype.ranking=function(e){t.getInstance().httpPost(s.default.strIp+s.default.strPort+"/users/ranking","",function(t){console.log("ranking \u670d\u52a1\u5668\u56de\u8c03");var o=JSON.parse(t);console.log("\u6570\u7ec4\u7684\u957f\u5ea6 = "+o.length);for(var n=[],a=0;a<o.length;a++){var c=new r.default;c.avatarUrl=o[a].avatarUrl,c.score=o[a].score,c.nickName=o[a].nickName,c.isSelf=o[a].openid==i.default.openid,c.rank=a+1,n.push(c)}e(n)}.bind(this))},e.prototype.getGameState=function(e){var o="gameid="+s.default.gameId;t.getInstance().httpPost(s.default.strIp+s.default.strPort+"/users/gameState",o,function(t){var o=JSON.parse(t);console.log("ssssssssssssssssss"+o.state),"-1"==o.state?c.default.getInstance().showView(s.default.viewBlack):e()}.bind(this))},e=t=n([d],e)}());o.default=u,cc._RF.pop()},{"../PlayerData":"PlayerData","../UserInfo":"UserInfo","../common/Common":"Common","../common/Define":"Define","./UIManager":"UIManager"}],LDataCannonManager:[function(e,t,o){"use strict";cc._RF.push(t,"aaf7aZ4antE07lqNghxULB3","LDataCannonManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LDataCannon"),a=function(){function e(){}return e.GetDataById=function(t){return 0==e.dataList.length&&(e.dataList[0]=new n.default(0,1,1,"-9999",1,-9999,-9999,-9999,-9999,-9999),e.dataList[1]=new n.default(1,1,1,"Watch Ads to obtain",2,1,-9999,-9999,-9999,-9999),e.dataList[2]=new n.default(2,1,1,"Accumulated to 50000 scores",3,-9999,5e4,-9999,-9999,-9999),e.dataList[3]=new n.default(3,1,1,"Upgrade coin level to 800%",4,-9999,-9999,70,-9999,-9999),e.dataList[4]=new n.default(4,1,4,"Free to obtain",2,1,-9999,-9999,-9999,-9999),e.dataList[5]=new n.default(5,1,1,"Upgrade offline level to 800%%",6,-9999,-9999,-9999,-9999,70),e.dataList[6]=new n.default(6,1,6,"Accumulated to 100000 scores",3,-9999,1e5,-9999,-9999,-9999),e.dataList[7]=new n.default(7,1,7,"Watch Ads to obtain",2,1,-9999,-9999,-9999,-9999),e.dataList[8]=new n.default(8,1,8,"Free to obtain",2,1,-9999,-9999,-9999,-9999),e.dataList[9]=new n.default(9,1,9,"Free to obtain",2,1,-9999,-9999,-9999,-9999),e.dataList[10]=new n.default(10,1,9,"Free to obtain",2,1,-9999,-9999,-9999,-9999),e.dataList[11]=new n.default(11,1,11,"Watch Ads to obtain",2,1,-9999,-9999,-9999,-9999),e.dataList[12]=new n.default(12,1,12,"Free to obtain",2,1,-9999,-9999,-9999,-9999)),e.dataList[t]},e.dataList=[],e}();o.default=a,cc._RF.pop()},{"./LDataCannon":"LDataCannon"}],LDataCannon:[function(e,t,o){"use strict";cc._RF.push(t,"13e2a6lY+FLkKwKZtC7J4FB","LDataCannon"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){return function(e,t,o,n,a,i,r,c,s,l){this.cannonId=e,this.type=t,this.bulletsId=o,this.cannontips=n,this.getmode=a,this.Adget=i,this.scoreget=r,this.goldlevel=c,this.shareGet=s,this.offline=l}}();o.default=n,cc._RF.pop()},{}],LDataGoldManager:[function(e,t,o){"use strict";cc._RF.push(t,"cefd3c60UpL0ag12Z0AhSSb","LDataGoldManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LDataGold"),a=function(){function e(){}return e.GetDataById=function(t){return 0==e.dataList.length&&(e.dataList[0]=new n.default(0,"prop_gold_yellow.png",1,1,50),e.dataList[1]=new n.default(1,"prop_gold_green.png",2,101,110),e.dataList[2]=new n.default(2,"prop_gold_blue.png",5,126,150),e.dataList[3]=new n.default(3,"prop_gold_deepblue.png",10,151,170),e.dataList[4]=new n.default(4,"prop_gold_violet.png",50,171,200),e.dataList[5]=new n.default(5,"prop_gold_red.png",100,201,1e4)),e.dataList[t]},e.dataList=[],e}();o.default=a,cc._RF.pop()},{"./LDataGold":"LDataGold"}],LDataGold:[function(e,t,o){"use strict";cc._RF.push(t,"367f0x6ks5OlavCP4Bt3b8f","LDataGold"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){return function(e,t,o,n,a){this.goldId=e,this.goldresources=t,this.goldnumber=o,this.minprobability=n,this.maxprobability=a}}();o.default=n,cc._RF.pop()},{}],LDataSceneManager:[function(e,t,o){"use strict";cc._RF.push(t,"2c4e5crUJ5EaIADQojnEMHo","LDataSceneManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LDataScene"),a=function(){function e(){}return e.GetDataById=function(t){return 0==e.dataList.length&&(e.dataList[0]=new n.default(0,"-9999",1,-9999,-9999,-9999,-9999,1e3,"scene_play_bg"),e.dataList[1]=new n.default(1,"Accumulated to 5000000 scores",3,-9999,5e6,-9999,-9999,1001,"background_universe01"),e.dataList[2]=new n.default(2,"Watch Ads to obtain",2,1,-9999,-9999,-9999,1002,"background_christmas01"),e.dataList[3]=new n.default(3,"Free to obtain",2,1,-9999,-9999,-9999,1003,"background_forest01"),e.dataList[4]=new n.default(4,"Free to obtain",2,1,-9999,-9999,-9999,1004,"scene_play_bg04")),e.dataList[t]},e.dataList=[],e}();o.default=a,cc._RF.pop()},{"./LDataScene":"LDataScene"}],LDataScene:[function(e,t,o){"use strict";cc._RF.push(t,"6a4c2IyqAlPE6rSgndLWJ5R","LDataScene"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){return function(e,t,o,n,a,i,r,c,s){this.sceneId=e,this.cannontips=t,this.getmode=o,this.Adget=n,this.scoreget=a,this.goldlevel=i,this.shareGet=r,this.saveID=c,this.background=s}}();o.default=n,cc._RF.pop()},{}],LDataStoncolourManager:[function(e,t,o){"use strict";cc._RF.push(t,"19949kH1aJIFoQNPR0k7lVY","LDataStoncolourManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LDataStoncolour"),a=function(){function e(){}return e.GetDataById=function(t){return 0==e.dataList.length&&(e.dataList[0]=new n.default(0,"64d42a"),e.dataList[1]=new n.default(1,"2ee6c2"),e.dataList[2]=new n.default(2,"23d5e7"),e.dataList[3]=new n.default(3,"238ae7"),e.dataList[4]=new n.default(4,"2339e7"),e.dataList[5]=new n.default(5,"5f29e2"),e.dataList[6]=new n.default(6,"8929eb"),e.dataList[7]=new n.default(7,"b324dd"),e.dataList[8]=new n.default(8,"ed24a8"),e.dataList[9]=new n.default(9,"ec2627")),e.dataList[t]},e.dataList=[],e}();o.default=a,cc._RF.pop()},{"./LDataStoncolour":"LDataStoncolour"}],LDataStoncolour:[function(e,t,o){"use strict";cc._RF.push(t,"e8a9fVgsh5C+J8i2r7OACgk","LDataStoncolour"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){return function(e,t){this.propId=e,this.color=t}}();o.default=n,cc._RF.pop()},{}],LDataStoneManager:[function(e,t,o){"use strict";cc._RF.push(t,"c7163fVeGFDd7S6KfJC3OIL","LDataStoneManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LDataStone"),a=function(){function e(){}return e.GetDataById=function(t){return 0==e.dataList.length&&(e.dataList[0]=new n.default(0,40,!1,1,2.5,2.5,2,1.5),e.dataList[1]=new n.default(1,60,!0,2,3.5,3.5,3,2.5),e.dataList[2]=new n.default(2,96,!0,4,5.5,5.5,4.5,4),e.dataList[3]=new n.default(3,120,!0,8,7,7,6,5)),e.dataList[t]},e.dataList=[],e}();o.default=a,cc._RF.pop()},{"./LDataStone":"LDataStone"}],LDataStone:[function(e,t,o){"use strict";cc._RF.push(t,"a27bb4Z9XlLaon4rrIXzxYF","LDataStone"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){return function(e,t,o,n,a,i,r,c){this.stonId=e,this.radius=t,this.isCandivision=o,this.stonscore=n,this.scalesize01=a,this.scalesize02=i,this.scalesize03=r,this.scalesize04=c}}();o.default=n,cc._RF.pop()},{}],LevelProgress:[function(e,t,o){"use strict";cc._RF.push(t,"889c2DIgAZBJbiJMCMMaVbo","LevelProgress");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeProgress=null,t.textCurLevel=null,t.textNextLevel=null,t.maxScore=0,t.curScore=0,t}return n(t,e),t.prototype.start=function(){},t.prototype.setLevelProgressInfo=function(e,t){this.nodeProgress.scale=0,this.textCurLevel.string=e.toString(),this.textNextLevel.string=(e+1).toString(),this.maxScore=t,this.curScore=0},t.prototype.setProgress=function(e){this.curScore=e,this.nodeProgress.setScale(this.curScore/this.maxScore,1)},a([c(cc.Node)],t.prototype,"nodeProgress",void 0),a([c(cc.Label)],t.prototype,"textCurLevel",void 0),a([c(cc.Label)],t.prototype,"textNextLevel",void 0),t=a([r],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],Levellnfo:[function(e,t,o){"use strict";cc._RF.push(t,"83dd9BlqOdA3rjdLGaN9vYR","Levellnfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./common/Common"),a=e("./UserInfo"),i=e("./datas/LDataStoneManager"),r=e("./datas/LDataGoldManager"),c=function(){function e(){}return e.getCreateStoneCount=function(e){var t=4;return e<=5?t+=e:(t=(t=10)+Math.floor(e/6)-1)>15&&(t=15),t},e.getRandomStoneId=function(){return 2==this.lastStoneId?n.default.getRandom(0,2):n.default.getRandom(0,4)},e.InitLevelStoneInfo=function(){this.levelStoneInfo=[],n.default.maxLevelScore=0,this.createStoneCount=0;for(var e=this.getCreateStoneCount(a.default.curLevel),t=0;t<e;t++){var o=this.getRandomStoneId(),r=i.default.GetDataById(o);n.default.maxLevelScore=n.default.maxLevelScore+r.stonscore,this.levelStoneInfo.push(o)}},e.getStoneId=function(){var e=this.levelStoneInfo[this.createStoneCount];return this.createStoneCount++,e},e.isCanCreateStone=function(){return this.levelStoneInfo.length>=this.createStoneCount},e.isFinishLevel=function(){return n.default.maxLevelScore==n.default.curLevelScore},e.getStoneScore=function(e){if(e)return a.default.curLevel;var t=(.1*a.default.bulletShootMaxCount+.1*a.default.firePower)*a.default.curLevel,o=new cc.Vec2(a.default.curLevel,Math.ceil(t/4)),i=new cc.Vec2(Math.ceil(t/4),Math.ceil(t/3)),r=new cc.Vec2(Math.ceil(t/2),Math.ceil(t)),c=new cc.Vec2(Math.ceil(t),Math.ceil(2*t)),s=new cc.Vec2(Math.ceil(2*t),Math.ceil(3*t)),l=new cc.Vec2(Math.ceil(3*t),Math.ceil(4*t)),d=null,u=n.default.getRandom(0,100);return d=u>99?l:u>96?s:u>66?c:u>31?r:u>11?i:o,Math.ceil(n.default.getRandom(d.x,d.y))},e.getCurLevelMaxScore=function(){return 5*((.1*a.default.bulletShootMaxCount+a.default.firePower+1)*a.default.curLevel)},e.getStoneInitY=function(){return n.default.getRandom(550,1e3)},e.getDropGoldCount=function(){if(1==n.default.curLevel||2==n.default.curLevel)return n.default.getRandom(1,3);if(3==n.default.curLevel)return n.default.getRandom(1,2);var e=Math.floor(.1*a.default.goldDropLevel)+3;return e>8&&(e=8),n.default.getRandom(1,e)},e.getDropGoldId=function(){for(var e=r.default.dataList.length,t=n.default.getRandom(0,100+a.default.goldDropLevel),o=0;o<e;o++){var i=r.default.dataList[o];if(t>i.minprobability&&t<=i.maxprobability)return i.goldId}return 0},e.getDropGoldRate=function(){for(var e=[],t=0,o=0;o<r.default.dataList.length;o++){var n=0,i=r.default.GetDataById(o);0==o?(n=i.maxprobability-a.default.goldDropLevel)<10&&(n=10):((n=n+a.default.goldDropLevel-t)>i.maxprobability&&(n=i.maxprobability),t+=n,n>0&&(n=t)),n<0&&(n=0),e.push(n)}return e},e.getUpgradeNeedGold=function(e){var t=1;return e>30&&(t=.01*(e-30)+t),Math.ceil(1/(10/e)*e*t*t)},e.getOffLineRewardGoldCount=function(){if(a.default.offLineLevel<=0)return 0;var t=.001*((new Date).getTime()-a.default.lastQuitTime);t>43200&&(t=43200);var o=e.getUpgradeNeedGold(a.default.bulletShootMaxCount-2);return Math.ceil((.5*o+50*a.default.offLineLevel)/10800*t)},e.lastStoneId=1,e.levelStoneInfo=[],e.createStoneCount=0,e.dropGoldRateArr=[],e}();o.default=c,cc._RF.pop()},{"./UserInfo":"UserInfo","./common/Common":"Common","./datas/LDataGoldManager":"LDataGoldManager","./datas/LDataStoneManager":"LDataStoneManager"}],MainViewCtr:[function(e,t,o){"use strict";cc._RF.push(t,"99580bZ449EcaG8ELmRyANN","MainViewCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../common/Common"),r=e("./ViewBase"),c=e("../manager/UIManager"),s=e("../common/Define"),l=e("../manager/GameManager"),d=e("../UserInfo"),u=e("../manager/ParticleEffectManager"),f=e("../common/FrameAnimation"),h=e("../manager/SoundManager"),p=cc._decorator,g=p.ccclass,v=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textGold=null,t.btn_ranking=null,t.btn_share=null,t.btn_bg=null,t.btn_sound=null,t.btn_cannon=null,t.btn_scene=null,t.btn_shaman=null,t.btn_brate=null,t.nodeCenterGuide=null,t.nodeCenterTitle=null,t.nodeCannonTip=null,t.nodeGoldTextParent=null,t.textGuide=null,t.node_title1=null,t.node_title2=null,t.nodeHand=null,t.nodeGoldTextParentInitPos=null,t}return n(t,e),t.prototype.refreshView=function(e){void 0===e&&(e=!1),this.refreshGoldCound(),this.nodeHand.stopAllActions(),this.textGuide.node.stopAllActions(),this.textGuide.node.rotation=0,this.nodeHand.position=new cc.Vec2(-123,this.nodeHand.position.y),this.node_title1.active=!1,this.node_title2.active=!1,"001"==s.default.gameId?this.node_title1.active=!0:"002"==s.default.gameId&&(this.node_title2.active=!0),this.nodeCenterGuide.stopAllActions(),this.nodeCenterGuide.position=new cc.Vec2(-640,0),this.nodeCenterGuide.runAction(cc.sequence(cc.moveTo(.8,new cc.Vec2(0,0)).easing(cc.easeBackOut()),cc.callFunc(function(){this.handMove()}.bind(this)))),i.default.isShowGoldFlyEffect&&(u.default.getInstance().showParticleEffect(4,cc.Vec2.ZERO,2,null,this.nodeCenterTitle),i.default.isShowGoldFlyEffect=!1),this.changeBrateState(),this.executeEvent()},t.prototype.addEvent=function(){i.default.addClickEvent(this.btn_ranking,this.onClick.bind(this)),i.default.addClickEvent(this.btn_share,this.onClick.bind(this)),i.default.addClickEvent(this.btn_bg,this.onClick.bind(this),!1),i.default.addClickEvent(this.btn_sound,this.onClick.bind(this)),i.default.addClickEvent(this.btn_cannon,this.onClick.bind(this)),i.default.addClickEvent(this.btn_shaman,this.onClick.bind(this)),i.default.addClickEvent(this.btn_scene,this.onClick.bind(this)),this.nodeGoldTextParentInitPos=this.nodeGoldTextParent.position;var e=this.btn_shaman.children[0].getComponent(f.default);e.init(),e.Play(8e3),i.default.actionLeftRightRotate(this.btn_shaman.children[0],.125,2,10),i.default.actionLeftRightRotate(this.btn_ranking,.15,18,3),i.default.actionLeftRightRotate(this.btn_share,.2,15,5)},t.prototype.handMove=function(){this.nodeHand.stopAllActions();var e=cc.moveTo(1.5,new cc.Vec2(130,this.nodeHand.position.y)),t=cc.moveTo(1.5,new cc.Vec2(-123,this.nodeHand.position.y));this.nodeHand.runAction(cc.repeatForever(cc.sequence(e,t))),i.default.actionLeftRightRotate(this.textGuide.node)},t.prototype.onClick=function(e){if("btn_bg"==e){if(i.default.pauseServer)return;c.default.getInstance().hideView(s.default.viewMain),c.default.getInstance().hideView(s.default.viewUpgrade),c.default.getInstance().showView(s.default.viewBattle,function(){i.default.isPlaying=!0,l.default.instance.restartGame()})}else"btn_sound"==e?this.chnageSoundState(!0):"btn_ranking"==e?(c.default.getInstance().showView(s.default.viewRanking),c.default.getInstance().hideView(s.default.viewMain),c.default.getInstance().hideView(s.default.viewUpgrade)):"btn_share"==e||("btn_cannon"==e?(c.default.getInstance().showView(s.default.viewSelectCannon),c.default.getInstance().hideView(s.default.viewMain),c.default.getInstance().hideView(s.default.viewUpgrade)):"btn_brate"==e||"btn_shaman"==e||"btn_scene"==e&&(c.default.getInstance().showView(s.default.viewSelectScene),c.default.getInstance().hideView(s.default.viewMain),c.default.getInstance().hideView(s.default.viewUpgrade)))},t.prototype.changeBrateState=function(e){void 0===e&&(e=!1),e&&(1==d.default.brate?d.default.brate=0:d.default.brate=1,d.default.saveBrateSate())},t.prototype.chnageSoundState=function(e){void 0===e&&(e=!1),e&&(i.default.isOpenSound=!i.default.isOpenSound),this.btn_sound.children[0].active=!i.default.isOpenSound,this.btn_sound.children[1].active=i.default.isOpenSound,i.default.isOpenSound?h.default.resume():h.default.pause()},t.prototype.refreshGoldCound=function(){this.textGold.string=i.default.getShowNumber(d.default.curGold);var e=60*this.textGold.string.length*-1-36;this.textGold.node.children[0].position=new cc.Vec2(e,-24),e=this.nodeGoldTextParentInitPos.x+24*(this.textGold.string.length-1),this.nodeGoldTextParent.position=new cc.Vec2(e,this.nodeGoldTextParentInitPos.y)},t.prototype.refreshGoldInfo=function(){this.refreshGoldCound()},t.prototype.executeEvent=function(e){void 0===e&&(e="defualt"),d.default.isHaveNewCannon()?(this.nodeCannonTip.active=!0,this.nodeCannonTip.stopAllActions(),i.default.actionLeftRightRotate(this.nodeCannonTip,.15,18,3)):this.nodeCannonTip.active=!1,d.default.isHaveNewScene()?(this.btn_scene.children[0].active=!0,this.btn_scene.children[0].stopAllActions(),i.default.actionLeftRightRotate(this.btn_scene.children[0],.15,18,3)):this.btn_scene.children[0].active=!1},a([v(cc.Label)],t.prototype,"textGold",void 0),a([v(cc.Node)],t.prototype,"btn_ranking",void 0),a([v(cc.Node)],t.prototype,"btn_share",void 0),a([v(cc.Node)],t.prototype,"btn_bg",void 0),a([v(cc.Node)],t.prototype,"btn_sound",void 0),a([v(cc.Node)],t.prototype,"btn_cannon",void 0),a([v(cc.Node)],t.prototype,"btn_scene",void 0),a([v(cc.Node)],t.prototype,"btn_shaman",void 0),a([v(cc.Node)],t.prototype,"btn_brate",void 0),a([v(cc.Node)],t.prototype,"nodeCenterGuide",void 0),a([v(cc.Node)],t.prototype,"nodeCenterTitle",void 0),a([v(cc.Node)],t.prototype,"nodeCannonTip",void 0),a([v(cc.Node)],t.prototype,"nodeGoldTextParent",void 0),a([v(cc.Label)],t.prototype,"textGuide",void 0),a([v(cc.Node)],t.prototype,"node_title1",void 0),a([v(cc.Node)],t.prototype,"node_title2",void 0),a([v(cc.Node)],t.prototype,"nodeHand",void 0),t=a([g],t)}(r.default);o.default=m,cc._RF.pop()},{"../UserInfo":"UserInfo","../common/Common":"Common","../common/Define":"Define","../common/FrameAnimation":"FrameAnimation","../manager/GameManager":"GameManager","../manager/ParticleEffectManager":"ParticleEffectManager","../manager/SoundManager":"SoundManager","../manager/UIManager":"UIManager","./ViewBase":"ViewBase"}],Main:[function(e,t,o){"use strict";cc._RF.push(t,"0dc5azuMp9KFYBZ7OAOtIYf","Main");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onLoad=function(){console.log("\u5f00\u59cb\u6e38\u620f"),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-1e3)},t.prototype.start=function(){},t=a([r],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],MiniGameInfo:[function(e,t,o){"use strict";cc._RF.push(t,"6f5cenV18xL/oBj7u8kbj9b","MiniGameInfo");var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(e,t,o){this.appId="",this.appName="",this.appDesc="",this.appId=e,this.appName=t,this.appDesc=o}return e=n([i],e)}());o.default=r,cc._RF.pop()},{}],OffLineRewardViewCtr:[function(e,t,o){"use strict";cc._RF.push(t,"ed71dNE39dD2IT+Mu479CvU","OffLineRewardViewCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ViewBase"),r=e("../common/Common"),c=e("../common/Define"),s=e("../manager/UIManager"),l=e("../UserInfo"),d=e("../manager/SoundManager"),u=cc._decorator,f=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textGold=null,t.btn_getReward=null,t.btn_vedio=null,t.btn_eventSwallow=null,t.node_bg=null,t}return n(t,e),t.prototype.addEvent=function(){r.default.addClickEvent(this.btn_getReward,this.onClick.bind(this)),r.default.addClickEvent(this.btn_vedio,this.onClick.bind(this)),r.default.addClickEvent(this.btn_eventSwallow,this.onClick.bind(this),!1)},t.prototype.onClick=function(e){if("btn_getReward"==e)s.default.getInstance().showView(c.default.viewMain),s.default.getInstance().hideView(c.default.viewOffLineReward),r.default.isShowGoldFlyEffect=!0,l.default.saveGoldData(r.default.offLineRewardCount);else if("btn_vedio"==e){var t=MiniGameAds.isRewardvideoReady();d.default.pause(),t?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),d.default.resume(),l.default.saveGoldData(2*r.default.offLineRewardCount),r.default.isShowGoldFlyEffect=!0,s.default.getInstance().showView(c.default.viewMain),s.default.getInstance().hideView(c.default.viewOffLineReward)}).catch(function(e){console.error("====> show RewardedVideo error: "+e.message),d.default.resume()}):(console.info("====> RewardedVideo not ready"),d.default.resume())}},t.prototype.refreshView=function(e){void 0===e&&(e=!1),this.textGold.string=r.default.getShowNumber(r.default.offLineRewardCount).toString(),this.btn_vedio.active=!0,this.node_bg.height=450},t.prototype.showActionCallBack=function(){},t.prototype.initView=function(){this.showActionType=c.default.up},a([h(cc.Label)],t.prototype,"textGold",void 0),a([h(cc.Node)],t.prototype,"btn_getReward",void 0),a([h(cc.Node)],t.prototype,"btn_vedio",void 0),a([h(cc.Node)],t.prototype,"btn_eventSwallow",void 0),a([h(cc.Node)],t.prototype,"node_bg",void 0),t=a([f],t)}(i.default);o.default=p,cc._RF.pop()},{"../UserInfo":"UserInfo","../common/Common":"Common","../common/Define":"Define","../manager/SoundManager":"SoundManager","../manager/UIManager":"UIManager","./ViewBase":"ViewBase"}],ParticleEffectManager:[function(e,t,o){"use strict";cc._RF.push(t,"837f31SWAhEtZ5C5Cq60/R/","ParticleEffectManager");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../ParticleEffect"),r=e("../common/Common"),c=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.getInstance=function(){return null==this.instance&&(this.instance=new o),this.instance},t.prototype.showParticleEffect=function(e,t,o,n,a){void 0===o&&(o=1),void 0===n&&(n=null),void 0===a&&(a=null);var c=cc.instantiate(r.default.nodeParticleEffects.children[e]);null!=a?a.addChild(c):r.default.nodeBallRoot.addChild(c);var s=c.addComponent(i.default);return s.setInfo(t,o,n),s},t.instance=null,t=o=a([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../ParticleEffect":"ParticleEffect","../common/Common":"Common"}],ParticleEffect:[function(e,t,o){"use strict";cc._RF.push(t,"69ed892Kj5Hka4ekQkwKx1V","ParticleEffect");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isSubTime=!1,t.playTime=0,t.particle=null,t}return n(t,e),t.prototype.onLoad=function(){this.particle=this.node.getComponent(cc.ParticleSystem)},t.prototype.setInfo=function(e,t,o){void 0===o&&(o=null),this.isSubTime=!0,this.playTime=t,this.node.position=e,null!=o&&(this.particle.startColor=o,this.particle.endColor=o)},t.prototype.update=function(e){this.isSubTime&&(this.playTime=this.playTime-e,this.playTime<=0&&(this.isSubTime=!1,this.node.destroy()))},t=a([r],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],PlayerData:[function(e,t,o){"use strict";cc._RF.push(t,"9a3ffd83LxMRqC1SQRpINVg","PlayerData");var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator.ccclass,i=function(){function e(){this.nickName="",this.avatarUrl="",this.score="",this.isSelf=!1,this.rank=0,this.weekDate=""}return e=n([a],e)}();o.default=i,cc._RF.pop()},{}],RankingItem:[function(e,t,o){"use strict";cc._RF.push(t,"f340ezIOe9EuIDWWntKgnc7","RankingItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeBg=null,t.textRank=null,t.textUserName=null,t.textScore=null,t.sp_face=null,t}return n(t,e),t.prototype.setRankingInfo=function(e){null!=e&&(this.textRank.string=e.rank.toString(),this.textUserName.string=e.nickName,this.textScore.string=e.score,this.sp_face.node.scale=.4,this.nodeBg.active=e.isSelf)},a([c(cc.Node)],t.prototype,"nodeBg",void 0),a([c(cc.Label)],t.prototype,"textRank",void 0),a([c(cc.Label)],t.prototype,"textUserName",void 0),a([c(cc.Label)],t.prototype,"textScore",void 0),a([c(cc.Sprite)],t.prototype,"sp_face",void 0),t=a([r],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],RankingViewCtr:[function(e,t,o){"use strict";cc._RF.push(t,"daa10ggGsZBSbVA4loFuuhd","RankingViewCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ViewBase"),r=e("../common/Common"),c=e("../manager/UIManager"),s=e("../common/Define"),l=e("../common/WXHelper"),d=e("../common/ScollHelper"),u=e("../RankingItem"),f=e("../manager/HttpManager"),h=e("../UserInfo"),p=cc._decorator,g=p.ccclass,v=p.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_back=null,t.btn_friend=null,t.btn_world=null,t.textVersion=null,t.scollHelper=null,t.dataArr=[],t.isShowFriendTag=!0,t.curTag="",t}return n(t,e),t.prototype.addEvent=function(){console.log("\u76d1\u542c\u4e86\u6309\u952e  MainView"),r.default.addClickEvent(this.btn_back,this.onClick.bind(this)),r.default.addClickEvent(this.btn_world,this.onClick.bind(this),!1),r.default.addClickEvent(this.btn_friend,this.onClick.bind(this),!1),this.textVersion.string=s.default.strVersion},t.prototype.refreshView=function(e){void 0===e&&(e=!1),console.log("\u663e\u793a\u6392\u884c\u699c\u754c\u9762"),e?this.onClick("btn_friend"):this.isShow&&"btn_world"==this.curTag&&this.onClick("btn_world")},t.prototype.onClick=function(e){if(this.btn_world.children[0].color=cc.color(0,0,0),this.btn_friend.children[0].color=cc.color(0,0,0),null==this.scollHelper&&(this.scollHelper=this.node.getComponent(d.default)),this.scollHelper.scollView.node.active=!1,this.curTag=e,"btn_back"==e)this.isShowFriendTag&&l.default.instance.hideView("Ranking"),this.dataArr=[],c.default.getInstance().hideView(s.default.viewRanking),c.default.getInstance().showView(s.default.viewMain),c.default.getInstance().showView(s.default.viewUpgrade);else if("btn_world"==e){if(""==h.default.openid)return l.default.wxCheckLogin(!1),void(this.btn_friend.children[0].color=cc.color(255,255,255));this.isShowFriendTag=!1,console.log("ssssssssssssssssssssssss     222"),l.default.instance.hideView("Ranking"),console.log("ssssss 88888888888888888"),0==this.dataArr.length?f.default.getInstance().ranking(function(e){this.dataArr=e,this.dataArr.length>0&&this.showWolrdRanking(this.dataArr)}.bind(this)):this.showWolrdRanking(this.dataArr),this.btn_world.children[0].color=cc.color(255,255,255)}else"btn_friend"==e&&(this.isShowFriendTag=!0,l.default.instance.showView("Ranking","friend"),this.btn_friend.children[0].color=cc.color(255,255,255))},t.prototype.showWolrdRanking=function(e){this.scollHelper.scollView.node.active=!0,this.scollHelper.initItems(e.length,this.refreshItem.bind(this)),this.node.active=!0},t.prototype.refreshItem=function(e,t,o){e>=this.dataArr.length||(console.log("idx ============= "+e),console.log("this.dataList = "+this.dataArr.length),o.getComponent(u.default).setRankingInfo(this.dataArr[e]))},a([v(cc.Node)],t.prototype,"btn_back",void 0),a([v(cc.Node)],t.prototype,"btn_friend",void 0),a([v(cc.Node)],t.prototype,"btn_world",void 0),a([v(cc.Label)],t.prototype,"textVersion",void 0),t=a([g],t)}(i.default);o.default=m,cc._RF.pop()},{"../RankingItem":"RankingItem","../UserInfo":"UserInfo","../common/Common":"Common","../common/Define":"Define","../common/ScollHelper":"ScollHelper","../common/WXHelper":"WXHelper","../manager/HttpManager":"HttpManager","../manager/UIManager":"UIManager","./ViewBase":"ViewBase"}],ResInfo:[function(e,t,o){"use strict";cc._RF.push(t,"c0488+B6mNOmImmV2Lp/G+x","ResInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){return function(e,t){this.key="",this.node=null,this.key=e,this.node=t}}();o.default=n,cc._RF.pop()},{}],ResManager:[function(e,t,o){"use strict";cc._RF.push(t,"6fd03CuQP1EYKPUYQyyyCFy","ResManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../common/Define"),a=e("../common/ResInfo"),i=function(){function e(){}return e.loadPrefab=function(e,t){void 0===t&&(t=null),console.log("loadPrefab url = "+e);var o=this.isAlreadyExsit(n.default.loadTypePrefab,e);null==o?cc.loader.loadRes(e,cc.Prefab,function(o,n){o?cc.log(o.message||o):(null!=t&&t(n),this.prefabArr.push(new a.default(e,n)))}.bind(this)):null!=t&&t(o)},e.isAlreadyExsit=function(e,t){var o=null;e==n.default.loadTypePrefab&&(o=this.prefabArr);for(var a=0;a<o.length;a++)if(o[a].key==t)return o[a].node;return null},e.loadSound=function(e,t){cc.loader.loadRes("sounds/music_christmas",cc.AudioClip,function(e,o){e?console.log("\u3010\u97f3\u9891\u3011\u8d44\u6e90\u52a0\u8f7d\u9519\u8bef"):(console.log("\u3010\u97f3\u9891\u3011\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210"),t(o))})},e.prefabArr=[],e}();o.default=i,cc._RF.pop()},{"../common/Define":"Define","../common/ResInfo":"ResInfo"}],ReviveViewCtr:[function(e,t,o){"use strict";cc._RF.push(t,"fc2calmwq9HZo8o+4lBW96V","ReviveViewCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ViewBase"),r=e("../common/Common"),c=e("../manager/GameManager"),s=e("../manager/UIManager"),l=e("../common/Define"),d=e("../UserInfo"),u=e("../manager/SoundManager"),f=cc._decorator,h=f.ccclass,p=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_vedio=null,t.btn_gold=null,t.texdGold=null,t.btn_abandon=null,t}return n(t,e),t.prototype.refreshView=function(e){void 0===e&&(e=!1);var t=10*d.default.curLevel+100;this.texdGold.string=t.toString(),this.btn_gold.active=!1,this.btn_vedio.active=!0},t.prototype.addEvent=function(){r.default.addClickEvent(this.btn_vedio,this.onClick.bind(this)),r.default.addClickEvent(this.btn_gold,this.onClick.bind(this)),r.default.addClickEvent(this.btn_abandon,this.onClick.bind(this))},t.prototype.initView=function(){this.showActionType=l.default.left},t.prototype.onClick=function(e){var t=this;if(console.log("tag ====================== "+e),"btn_vedio"==e){var o=MiniGameAds.isRewardvideoReady();u.default.pause(),o?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),u.default.resume(),s.default.getInstance().refreshView(l.default.viewBattle),c.default.instance.reviveGame(),s.default.getInstance().hideView(l.default.viewRevive)}).catch(function(e){console.error("====> show RewardedVideo error: "+e.message),u.default.resume(),t.btn_vedio.active=!1,t.btn_gold.active=!0}):(console.info("====> RewardedVideo not ready"),u.default.resume(),this.btn_vedio.active=!1,this.btn_gold.active=!0)}else if("btn_gold"==e){var n=10*d.default.curLevel+100;if(!(d.default.curGold>=n))return void r.default.showPrompt("Insufficient coins",900);d.default.saveGoldData(-1*n),s.default.getInstance().refreshView(l.default.viewBattle),c.default.instance.reviveGame(),s.default.getInstance().hideView(l.default.viewRevive)}else if("btn_abandon"==e){var a=MiniGameAds.isInterstitialReady();u.default.pause(),a?MiniGameAds.showInterstitial().then(function(){console.info("====> show interstitial success"),u.default.resume(),c.default.instance.gameOver(null),s.default.getInstance().hideView(l.default.viewRevive)}).catch(function(e){console.error("====> show interstitial error: "+e.message),u.default.resume(),c.default.instance.gameOver(null),s.default.getInstance().hideView(l.default.viewRevive)}):(console.info("====> interstitial not ready"),u.default.resume(),c.default.instance.gameOver(null),s.default.getInstance().hideView(l.default.viewRevive))}},a([p(cc.Node)],t.prototype,"btn_vedio",void 0),a([p(cc.Node)],t.prototype,"btn_gold",void 0),a([p(cc.Label)],t.prototype,"texdGold",void 0),a([p(cc.Node)],t.prototype,"btn_abandon",void 0),t=a([h],t)}(i.default);o.default=g,cc._RF.pop()},{"../UserInfo":"UserInfo","../common/Common":"Common","../common/Define":"Define","../manager/GameManager":"GameManager","../manager/SoundManager":"SoundManager","../manager/UIManager":"UIManager","./ViewBase":"ViewBase"}],"SceneObjectManager ":[function(e,t,o){"use strict";cc._RF.push(t,"751c7A2aFVPFJGb28mBR5v3","SceneObjectManager ");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../common/Common"),r=cc._decorator,c=r.ccclass,s=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeShip=null,t.nodeCloud1=null,t.nodeCloud2=null,t.nodeCloud3=null,t}return n(t,e),t.prototype.start=function(){this.legtRightMove(this.nodeShip,-250,-113,30,50),this.legtRightMove(this.nodeCloud1,-400,-268,30,50),this.legtRightMove(this.nodeCloud2,-320,-250,20,60),this.legtRightMove(this.nodeCloud3,-350,-250,10,70)},t.prototype.legtRightMove=function(e,t,o,n,a){var r=i.default.getRandom(t,o);e.position=new cc.Vec2(r,e.position.y);var c=cc.moveTo(i.default.getRandom(n,a),new cc.Vec2(i.default.getRandom(700,900),e.position.y));e.runAction(cc.repeatForever(cc.sequence(c,cc.callFunc(function(){e.position=new cc.Vec2(r,e.position.y)}.bind(this)))))},a([s(cc.Node)],t.prototype,"nodeShip",void 0),a([s(cc.Node)],t.prototype,"nodeCloud1",void 0),a([s(cc.Node)],t.prototype,"nodeCloud2",void 0),a([s(cc.Node)],t.prototype,"nodeCloud3",void 0),t=a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../common/Common":"Common"}],ScollHelper:[function(e,t,o){"use strict";cc._RF.push(t,"89a80qBEiBEhK9EeY9sFQ2g","ScollHelper");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scollView=null,t.nodeItem=null,t.nodeContent=null,t.initCount=0,t.maxCount=100,t.curIndex=0,t.offsetIndex=0,t.lastPosY=0,t}return n(t,e),t.prototype.start=function(){console.log(this.nodeItem),console.log(this.nodeContent)},t.prototype.initItems=function(e,t){if(this.refreshItemCallBack=t,0==this.nodeContent.childrenCount)for(var o=0;o<8;o++){var n=cc.instantiate(this.nodeItem);this.nodeContent.addChild(n),n.position=new cc.Vec2(0,-88*o-5-44)}for(o=0;o<8;o++)this.nodeContent.children[o].position=new cc.Vec2(0,-88*o-5-44),this.nodeContent.children[o].active=!1;this.maxCount=e,e>8&&(e=8);for(o=0;o<e;o++){n=this.nodeContent.children[o];this.initCount=o,n.active=!0,this.refreshItem(o,0,n)}this.nodeContent.height=88*this.maxCount,this.lastPosY=this.nodeContent.position.y,this.offsetIndex=0,this.nodeContent.position=new cc.Vec2(0,308)},t.prototype.update=function(e){var t=!1;this.lastPosY<this.nodeContent.position.y&&(t=!0),this.nodeContent.position.y<308?(this.scollView.stopAutoScroll(),this.nodeContent.position=new cc.Vec2(0,308)):this.nodeContent.position.y>=308+88*this.maxCount&&(this.scollView.stopAutoScroll(),this.nodeContent.position=new cc.Vec2(0,308+88*this.maxCount));var o=Math.floor((this.nodeContent.position.y-308)/88);if(this.lastPosY=this.nodeContent.position.y,!(o<0||o+this.initCount>=this.maxCount)){var n=Math.abs(this.offsetIndex-o);if(n>0){console.log("  index = "+o+"  count = "+n+"  this.offsetIndex = "+this.offsetIndex),this.offsetIndex=o;for(var a=this.nodeContent.childrenCount,i=n;i>0;i--)if(this.nodeContent.children.sort(function(e,t){return t.position.y-e.position.y}),t){this.curIndex=o-i;var r=this.nodeContent.children[0],c=this.nodeContent.children[a-1];r.position=new cc.Vec2(0,c.position.y-88),this.refreshItem(this.curIndex+this.initCount+1,0,r)}else{this.curIndex=o+i;r=this.nodeContent.children[0];(c=this.nodeContent.children[a-1]).position=new cc.Vec2(0,r.position.y+88),this.refreshItem(this.curIndex-1,0,c)}}}},t.prototype.refreshItem=function(e,t,o){null!=this.refreshItemCallBack&&this.refreshItemCallBack(e,t,o)},a([c(cc.ScrollView)],t.prototype,"scollView",void 0),a([c(cc.Node)],t.prototype,"nodeItem",void 0),a([c(cc.Node)],t.prototype,"nodeContent",void 0),t=a([r],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],SelectCannonItem:[function(e,t,o){"use strict";cc._RF.push(t,"c97269PYXpGeZzJsBQyMZoT","SelectCannonItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./UserInfo"),r=e("./common/Define"),c=e("./common/Common"),s=cc._decorator,l=s.ccclass,d=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_CannonRoot=null,t.node_newTag=null,t.node_useTag=null,t.text_desc1=null,t.text_desc2=null,t.text_desc3=null,t}return n(t,e),t.prototype.start=function(){},t.prototype.refreshItemInfo=function(){if(this.text_desc1.string="",this.text_desc2.string="",this.text_desc3.string="",this.node_newTag.active=!1,i.default.isOwnCannonById(this.cannonData.cannonId))this.text_desc3.string="Owned",1==i.default.getCannnonState(this.cannonData.cannonId)&&(this.node_newTag.active=!0,this.node_newTag.stopAllActions(),c.default.actionLeftRightRotate(this.node_newTag,.15,18,3));else if(this.cannonData.getmode==r.default.cannonVideo)this.text_desc1.string="Watch Ads to obtain";else if(this.cannonData.getmode==r.default.cannonTotalScore){this.text_desc1.string="Accumulated to\n"+this.cannonData.scoreget+"scores";var e=i.default.totalScore;e>this.cannonData.scoreget&&(e=this.cannonData.scoreget),this.text_desc2.string=e.toString()+"/"+this.cannonData.scoreget.toString()}else this.cannonData.getmode==r.default.cannonDropGoldLevel?(this.text_desc1.string="Upgrade coin level\n to"+(10*(this.cannonData.goldlevel+10)).toString()+"%",this.text_desc2.string=10*(i.default.goldDropLevel-1)+100+"%/"+(10*(this.cannonData.goldlevel+10)).toString()+"%"):this.cannonData.getmode==r.default.cannonShare?this.text_desc1.string=this.cannonData.cannontips:this.cannonData.getmode==r.default.cannonOffLine&&(this.text_desc1.string="Upgrade offline level\n to"+(10*(this.cannonData.offline+10)).toString()+"%",this.text_desc2.string=10*i.default.offLineLevel+100+"%/"+(10*(this.cannonData.offline+10)).toString()+"%");this.node_useTag.active=!1,this.cannonData.cannonId==i.default.curUseCannonId&&(this.node_useTag.active=!0)},t.prototype.refreshItemInfoByData=function(e){this.cannonData=e,this.refreshItemInfo()},a([d(cc.Node)],t.prototype,"node_CannonRoot",void 0),a([d(cc.Node)],t.prototype,"node_newTag",void 0),a([d(cc.Node)],t.prototype,"node_useTag",void 0),a([d(cc.Label)],t.prototype,"text_desc1",void 0),a([d(cc.Label)],t.prototype,"text_desc2",void 0),a([d(cc.Label)],t.prototype,"text_desc3",void 0),t=a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./UserInfo":"UserInfo","./common/Common":"Common","./common/Define":"Define"}],SelectCannonViewCtr:[function(e,t,o){"use strict";cc._RF.push(t,"0fef79QAqxGiL6Ab23drXGv","SelectCannonViewCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ViewBase"),r=e("../datas/LDataCannonManager"),c=e("../manager/CannonManager"),s=e("../manager/UIManager"),l=e("../common/Define"),d=e("../common/Common"),u=e("../SelectCannonItem"),f=e("../UserInfo"),h=e("../manager/GameManager"),p=e("../manager/SoundManager"),g=cc._decorator,v=g.ccclass,m=g.property,y=function(){return function(e,t){this.index=e,this.offsetX=t}}(),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.nodeContent=null,t.eventContent=null,t.btn_back=null,t.btn_video=null,t.btn_use=null,t.btn_share=null,t.node_item=null,t.maxCount=0,t.curCount=0,t.scrollInfoArr=[],t.itemArr=[],t.isCanAutoScroll=!1,t.scrollState=0,t.isClickShare=!1,t}return n(t,e),t.prototype.refreshView=function(e){void 0===e&&(e=!1),this.isClickShare=!1,this.refreshItemState(),this.scrollToIndex(f.default.curUseCannonId)},t.prototype.refreshItemState=function(){for(var e=0;e<this.itemArr.length;e++)this.itemArr[e].refreshItemInfoByData(r.default.dataList[e])},t.prototype.addEvent=function(){d.default.addClickEvent(this.eventContent,this.onClick.bind(this),!1),d.default.addClickEvent(this.btn_back,this.onClick.bind(this)),d.default.addClickEvent(this.btn_use,this.onClick.bind(this)),d.default.addClickEvent(this.btn_video,this.onClick.bind(this))},t.prototype.onClick=function(e){var t=this;if("btn_back"==e)s.default.getInstance().showView(l.default.viewMain),s.default.getInstance().showView(l.default.viewUpgrade),s.default.getInstance().hideView(l.default.viewSelectCannon);else if("btn_use"==e)f.default.curUseCannonId!=this.curSelectIndex&&(f.default.setCurUseCannonId(this.curSelectIndex),h.default.instance.changeCannonById(this.curSelectIndex),s.default.getInstance().showView(l.default.viewMain),s.default.getInstance().showView(l.default.viewUpgrade),s.default.getInstance().hideView(l.default.viewSelectCannon));else if("btn_video"==e){var o=MiniGameAds.isRewardvideoReady();p.default.pause(),o?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),p.default.resume();var e=r.default.dataList[t.curSelectIndex];null!=e&&e.getmode==l.default.cannonVideo&&(f.default.addNewCannon(t.curSelectIndex,2),t.refreshButtonsState(),t.refreshItemState())}).catch(function(e){console.error("====> show RewardedVideo error: "+e.message),p.default.resume()}):(console.info("====> RewardedVideo not ready"),p.default.resume())}},t.prototype.initView=function(){this.maxCount=r.default.dataList.length;for(var e=0;e<this.maxCount;e++){var t=cc.instantiate(this.node_item);t.position=new cc.Vec2(213*e+320,-150),t.setParent(this.nodeContent),this.scrollInfoArr.push(new y(e,t.position.x));var o=t.getComponent(u.default);this.itemArr.push(o)}this.createCannon(this.curCount),this.nodeContent.width=213*(this.maxCount+2)},t.prototype.createCannon=function(e){c.default.createCannon(e,this.nodeContent.children[e],function(e){e.node.position=new cc.Vec2(0,55),e.node.setScale(.8),this.curCount++,this.curCount<this.maxCount&&this.createCannon(this.curCount)}.bind(this))},t.prototype.scrollToFitPos=function(){var e=Math.abs(this.nodeContent.position.x);console.log(e);for(var t=0;t<this.scrollInfoArr.length;t++)this.scrollInfoArr[t].distanceX=Math.abs(this.scrollInfoArr[t].offsetX-e);this.scrollInfoArr.sort(function(e,t){return e.distanceX-t.distanceX});var o=this.scrollInfoArr[0].index;1==f.default.getCannnonState(o)&&(f.default.addNewCannon(o,2),this.refreshItemState()),this.scrollToIndex(o)},t.prototype.scrollToIndex=function(e){this.curSelectIndex=e,this.refreshButtonsState(),this.scrollView.scrollTo(new cc.Vec2(this.curSelectIndex/(r.default.dataList.length-1),0),1)},t.prototype.refreshButtonsState=function(){if(this.btn_back.active=!1,this.btn_use.active=!1,this.btn_video.active=!1,f.default.isOwnCannonById(this.curSelectIndex))f.default.curUseCannonId==this.curSelectIndex?this.btn_back.active=!0:this.btn_use.active=!0;else{var e=r.default.dataList[this.curSelectIndex];e.getmode==l.default.cannonVideo?this.btn_video.active=!0:e.getmode==l.default.cannonShare?this.btn_video.active=!0:this.btn_back.active=!0}},t.prototype.update=function(e){this.scrollView.isScrolling()?this.scrollState=1:1==this.scrollState&&(this.scrollState=0,this.scrollToFitPos())},t.prototype.executeEvent=function(e){void 0===e&&(e="defualt");var t=r.default.GetDataById(this.curSelectIndex);null!=t&&t.getmode==l.default.cannonShare&&(f.default.addNewCannon(this.curSelectIndex,2),this.refreshButtonsState(),this.refreshItemState())},a([m(cc.ScrollView)],t.prototype,"scrollView",void 0),a([m(cc.Node)],t.prototype,"nodeContent",void 0),a([m(cc.Node)],t.prototype,"eventContent",void 0),a([m(cc.Node)],t.prototype,"btn_back",void 0),a([m(cc.Node)],t.prototype,"btn_video",void 0),a([m(cc.Node)],t.prototype,"btn_use",void 0),a([m(cc.Node)],t.prototype,"btn_share",void 0),a([m(cc.Node)],t.prototype,"node_item",void 0),t=a([v],t)}(i.default);o.default=w,cc._RF.pop()},{"../SelectCannonItem":"SelectCannonItem","../UserInfo":"UserInfo","../common/Common":"Common","../common/Define":"Define","../datas/LDataCannonManager":"LDataCannonManager","../manager/CannonManager":"CannonManager","../manager/GameManager":"GameManager","../manager/SoundManager":"SoundManager","../manager/UIManager":"UIManager","./ViewBase":"ViewBase"}],SelectSceneItem:[function(e,t,o){"use strict";cc._RF.push(t,"307cfSxVvlGjL/vZ2kxgelq","SelectSceneItem");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./UserInfo"),r=e("./common/Define"),c=e("./common/Common"),s=cc._decorator,l=s.ccclass,d=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_CannonRoot=null,t.node_newTag=null,t.node_useTag=null,t.text_desc1=null,t.text_desc2=null,t.text_desc3=null,t}return n(t,e),t.prototype.start=function(){},t.prototype.refreshItemInfo=function(){if(this.text_desc1.string="",this.text_desc2.string="",this.text_desc3.string="",this.node_newTag.active=!1,i.default.isOwnCannonById(this.cannonData.sceneId))this.text_desc3.string="Owned",1==i.default.getCannnonState(this.cannonData.sceneId)&&(this.node_newTag.active=!0,this.node_newTag.stopAllActions(),c.default.actionLeftRightRotate(this.node_newTag,.15,18,3));else if(this.cannonData.getmode==r.default.cannonVideo)this.text_desc1.string="Watch Ads to obtain";else if(this.cannonData.getmode==r.default.cannonTotalScore){this.text_desc1.string="Accumulated to\n"+this.cannonData.scoreget+"scores";var e=i.default.totalScore;e>this.cannonData.scoreget&&(e=this.cannonData.scoreget),this.text_desc2.string=e.toString()+"/"+this.cannonData.scoreget.toString()}else this.cannonData.getmode==r.default.cannonDropGoldLevel?(this.text_desc1.string="Upgrade coin level\n to"+(10*(this.cannonData.goldlevel+10)).toString()+"%",this.text_desc2.string=10*(i.default.goldDropLevel-1)+100+"%/"+(10*(this.cannonData.goldlevel+10)).toString()+"%"):this.cannonData.getmode==r.default.cannonShare&&(this.text_desc1.string=this.cannonData.cannontips);this.node_useTag.active=!1,this.cannonData.sceneId==i.default.curSceneId&&(this.node_useTag.active=!0)},t.prototype.refreshItemInfoByData=function(e){this.cannonData=e,this.refreshItemInfo()},a([d(cc.Node)],t.prototype,"node_CannonRoot",void 0),a([d(cc.Node)],t.prototype,"node_newTag",void 0),a([d(cc.Node)],t.prototype,"node_useTag",void 0),a([d(cc.Label)],t.prototype,"text_desc1",void 0),a([d(cc.Label)],t.prototype,"text_desc2",void 0),a([d(cc.Label)],t.prototype,"text_desc3",void 0),t=a([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./UserInfo":"UserInfo","./common/Common":"Common","./common/Define":"Define"}],SelectSceneViewCtr:[function(e,t,o){"use strict";cc._RF.push(t,"dc58eMH5NZM1pSQi4zWdKOX","SelectSceneViewCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./ViewBase"),r=e("../manager/UIManager"),c=e("../common/Define"),s=e("../common/Common"),l=e("../UserInfo"),d=e("../manager/GameManager"),u=e("../SelectSceneItem"),f=e("../datas/LDataSceneManager"),h=e("../manager/ResManager"),p=e("../manager/SoundManager"),g=cc._decorator,v=g.ccclass,m=g.property,y=function(){return function(e,t,o){this.index=e,this.offsetX=t,this.data=o}}(),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.nodeContent=null,t.eventContent=null,t.btn_back=null,t.btn_video=null,t.btn_use=null,t.btn_share=null,t.node_item=null,t.maxCount=0,t.curCount=0,t.scrollInfoArr=[],t.itemArr=[],t.isCanAutoScroll=!1,t.scrollState=0,t.isClickShare=!1,t.sceneId=0,t}return n(t,e),t.prototype.refreshView=function(e){void 0===e&&(e=!1),this.isClickShare=!1,this.scrollView.scrollTo(new cc.Vec2(0,150),0),console.log("UserInfo.getCurSceneIndex() = "+l.default.getCurSceneIndex()),this.scrollToFitPos(),this.scrollToIndex(l.default.getCurSceneIndex(),l.default.getCurSceneIndex()),this.refreshItemState()},t.prototype.refreshItemState=function(){for(var e=0;e<this.itemArr.length;e++)this.itemArr[e].refreshItemInfoByData(f.default.dataList[e])},t.prototype.addEvent=function(){s.default.addClickEvent(this.eventContent,this.onClick.bind(this),!1),s.default.addClickEvent(this.btn_back,this.onClick.bind(this)),s.default.addClickEvent(this.btn_use,this.onClick.bind(this)),s.default.addClickEvent(this.btn_video,this.onClick.bind(this))},t.prototype.onClick=function(e){var t=this;if("btn_back"==e)r.default.getInstance().showView(c.default.viewMain),r.default.getInstance().showView(c.default.viewUpgrade),r.default.getInstance().hideView(c.default.viewSelectScene);else if("btn_use"==e)l.default.setCurUseSceneId(this.scrollInfoArr[0].data.saveID),d.default.instance.changeSceneByIndex(l.default.getCurSceneIndex()),r.default.getInstance().showView(c.default.viewMain),r.default.getInstance().showView(c.default.viewUpgrade),r.default.getInstance().hideView(c.default.viewSelectScene);else if("btn_video"==e){var o=MiniGameAds.isRewardvideoReady();p.default.pause(),o?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),p.default.resume();var e=t.scrollInfoArr[0].data;null!=e&&e.getmode==c.default.cannonVideo&&(l.default.addNewCannon(e.saveID,2),t.refreshButtonsState(),t.refreshItemState())}).catch(function(e){console.error("====> show RewardedVideo error: "+e.message),p.default.resume()}):(console.info("====> RewardedVideo not ready"),p.default.resume())}},t.prototype.initView=function(){this.maxCount=f.default.dataList.length;for(var e=0;e<this.maxCount;e++){var t=cc.instantiate(this.node_item);t.position=new cc.Vec2(213*e+320,-150),t.setParent(this.nodeContent),this.scrollInfoArr.push(new y(e,t.position.x,f.default.GetDataById(e)));var o=t.getComponent(u.default);this.itemArr.push(o)}this.createScene(this.curCount),this.nodeContent.width=213*(this.maxCount+2)},t.prototype.createScene=function(e){h.default.loadPrefab("prefabs/scenes/ui_scene"+f.default.GetDataById(this.curCount).saveID,function(t){var o=cc.instantiate(t);o.setParent(this.nodeContent.children[e].children[1]),o.position=new cc.Vec2(0,112),o.setScale(.8),this.curCount++,this.curCount<this.maxCount&&this.createScene(this.curCount)}.bind(this))},t.prototype.scrollToFitPos=function(){var e=Math.abs(this.nodeContent.position.x);console.log(e);for(var t=0;t<this.scrollInfoArr.length;t++)this.scrollInfoArr[t].distanceX=Math.abs(this.scrollInfoArr[t].offsetX-e);this.scrollInfoArr.sort(function(e,t){return e.distanceX-t.distanceX});var o=this.scrollInfoArr[0].index;1==l.default.getCannnonState(this.scrollInfoArr[0].data.saveID)&&(l.default.addNewCannon(this.scrollInfoArr[0].data.saveID,2),this.refreshItemState()),this.scrollToIndex(o)},t.prototype.scrollToIndex=function(e,t){void 0===t&&(t=0),this.curSelectIndex=e,this.sceneId=this.scrollInfoArr[t].data.saveID,this.scrollView.scrollTo(new cc.Vec2(this.curSelectIndex/(f.default.dataList.length-1),0),1),this.refreshButtonsState()},t.prototype.refreshButtonsState=function(){if(this.btn_back.active=!1,this.btn_use.active=!1,this.btn_video.active=!1,l.default.isOwnCannonById(this.sceneId))l.default.curSceneId==this.sceneId?this.btn_back.active=!0:this.btn_use.active=!0;else{var e=this.scrollInfoArr[0].data;e.getmode==c.default.cannonVideo?this.btn_video.active=!0:e.getmode==c.default.cannonShare?this.btn_video.active=!0:this.btn_back.active=!0}},t.prototype.update=function(e){this.scrollView.isScrolling()?this.scrollState=1:1==this.scrollState&&(this.scrollState=0,this.scrollToFitPos())},t.prototype.executeEvent=function(e){void 0===e&&(e="defualt");var t=this.scrollInfoArr[0].data;null!=t&&t.getmode==c.default.cannonShare&&(l.default.addNewCannon(t.saveID,2),this.refreshButtonsState(),this.refreshItemState())},a([m(cc.ScrollView)],t.prototype,"scrollView",void 0),a([m(cc.Node)],t.prototype,"nodeContent",void 0),a([m(cc.Node)],t.prototype,"eventContent",void 0),a([m(cc.Node)],t.prototype,"btn_back",void 0),a([m(cc.Node)],t.prototype,"btn_video",void 0),a([m(cc.Node)],t.prototype,"btn_use",void 0),a([m(cc.Node)],t.prototype,"btn_share",void 0),a([m(cc.Node)],t.prototype,"node_item",void 0),t=a([v],t)}(i.default);o.default=w,cc._RF.pop()},{"../SelectSceneItem":"SelectSceneItem","../UserInfo":"UserInfo","../common/Common":"Common","../common/Define":"Define","../datas/LDataSceneManager":"LDataSceneManager","../manager/GameManager":"GameManager","../manager/ResManager":"ResManager","../manager/SoundManager":"SoundManager","../manager/UIManager":"UIManager","./ViewBase":"ViewBase"}],Shake:[function(e,t,o){"use strict";cc._RF.push(t,"8714eoufrJJSbi/sCn/Fyrd","Shake");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,c=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._initial_x=0,t._initial_y=0,t._strength_x=0,t._strength_y=0,t}var o;return n(t,e),o=t,t.create=function(e,t,n){var a=new o;return a.initWithDuration(e,t,n),a},t.prototype.initWithDuration=function(e,t,o){return cc.ActionInterval.prototype.initWithDuration.apply(this,arguments),this._strength_x=t,this._strength_y=o,!0},t.prototype.fgRangeRand=function(e,t){return Math.random()*(t-e)+e},t.prototype.update=function(e){var t=this.fgRangeRand(-this._strength_x,this._strength_x),o=this.fgRangeRand(-this._strength_y,this._strength_y);this.getTarget().setPosition(t+this._initial_x,o+this._initial_y)},t.prototype.startWithTarget=function(e){cc.ActionInterval.prototype.startWithTarget.apply(this,arguments),this._initial_x=e.x,this._initial_y=e.y},t.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y)),cc.ActionInterval.prototype.stop.apply(this)},t=o=a([r],t)}(cc.ActionInterval));o.default=c,cc._RF.pop()},{}],SoundManager:[function(e,t,o){"use strict";cc._RF.push(t,"2ec3frWE4VLwaxywk3IdnZ4","SoundManager");var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../common/Common"),i=e("./ResManager"),r=cc._decorator,c=r.ccclass,s=(r.property,function(){function e(){}var t;return t=e,e.palySoundById=function(e,o){void 0===o&&(o=!1),i.default.loadSound(e,function(n){if(null!=n){var a=new cc.Node(e.toString()).addComponent(cc.AudioSource);a.clip=n,a.loop=o,a.volume=.5,a.play(),t.audioSourceArr[e]=a}}.bind(this))},e.pause=function(){for(var e=0;e<t.audioSourceArr.length;e++){var o=t.audioSourceArr[e];null!=o&&(o.volume=0,o.pause(),console.log("\u6682\u505c\u97f3\u4e50"))}t.isSoundOpen=0},e.resume=function(){if(a.default.isOpenSound){for(var e=0;e<t.audioSourceArr.length;e++){var o=t.audioSourceArr[e];null!=o&&(o.volume=.5,o.resume(),console.log("\u5f00\u542f\u97f3\u4e50"))}t.isSoundOpen=1}},e.isSoundOpen=1,e.audioSourceArr=[],e=t=n([c],e)}());o.default=s,cc._RF.pop()},{"../common/Common":"Common","./ResManager":"ResManager"}],TimeTaskManager:[function(e,t,o){"use strict";cc._RF.push(t,"e996b0Pd8pM+LZGWhmtBZ+W","TimeTaskManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../common/TimeTask"),a=function(){function e(){}return e.addTimeTask=function(t,o,a,i){void 0===a&&(a="defualt"),void 0===i&&(i=-1),e.timeTasks.push(new n.default(t,o,a,i))},e.removeTimeTask=function(t){for(var o=0;o<e.timeTasks.length;o++)if(e.timeTasks[o].getOnlyTag()==t){e.timeTasks.splice(o,1);break}},e.updateTime=function(t){for(var o=0;o<e.timeTasks.length;o++)e.timeTasks[o].updateTime(t)},e.timeTasks=[],e}();o.default=a,cc._RF.pop()},{"../common/TimeTask":"TimeTask"}],TimeTask:[function(e,t,o){"use strict";cc._RF.push(t,"47830/QGBNP55t00E9MYTOR","TimeTask"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../manager/TimeTaskManager"),a=function(){function e(e,t,o,n){void 0===o&&(o="defualt"),void 0===n&&(n=-1),this.intervalTime=1,this.totalTime=0,this.onlyTag="defualt",this.callBack=null,this.loopCount=-1,this.isPuase=!0,this.isGood=!0,this.intervalTime=e,this.callBack=t,this.onlyTag=o,this.loopCount=n,this.isPuase=!1}return e.prototype.updateTime=function(e){this.isPuase||(this.totalTime=this.totalTime+e,this.totalTime>=this.intervalTime&&(this.totalTime=0,null!=this.callBack&&(this.loopCount>0&&(this.loopCount--,0==this.loopCount&&n.default.removeTimeTask(this.onlyTag)),this.callBack(this.onlyTag))))},e.prototype.setPause=function(e){this.isPuase=e},e.prototype.resetIntervalTime=function(e){this.intervalTime=e},e.prototype.resetTotalTime=function(){this.totalTime=0},e.prototype.getOnlyTag=function(){return this.onlyTag},e}();o.default=a,cc._RF.pop()},{"../manager/TimeTaskManager":"TimeTaskManager"}],UIManager:[function(e,t,o){"use strict";cc._RF.push(t,"6d351shUZdMTLLjgdH9gJZe","UIManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../ui/ViewBase"),a=e("./ResManager"),i=e("../common/Common"),r=e("../common/Define"),c=function(){function e(){this.viewArr=[],this.curViewId=0}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.showView=function(e,t){void 0===t&&(t=null),this.curViewId=e,null==this.viewArr[e]?a.default.loadPrefab("prefabs/ui/"+r.default.viewUrl[e],function(o){var a=cc.instantiate(o),r=a.getComponent(n.default);this.viewArr[e]=r,i.default.nodeUiRoot.addChild(a),r.showView(),null!=t&&t()}.bind(this)):(this.viewArr[e].showView(),null!=t&&t())},e.prototype.hideView=function(e){null!=this.viewArr[e]?this.viewArr[e].hideView():console.log("\u5f53\u524d\u754c\u9762\u6ca1\u6709\u6253\u5f00...")},e.prototype.refreshView=function(e,t){void 0===t&&(t=!1),null!=this.viewArr[e]&&this.viewArr[e].refreshView(t)},e.prototype.refreshGoldInfo=function(e){null!=this.viewArr[e]&&this.viewArr[e].refreshGoldInfo()},e.prototype.executeEvent=function(e,t){void 0===t&&(t="defualt"),null!=this.viewArr[e]&&this.viewArr[e].executeEvent(t)},e.prototype.isShow=function(e){return null!=this.viewArr[e]&&this.viewArr[e].isShow},e.instance=null,e}();o.default=c,cc._RF.pop()},{"../common/Common":"Common","../common/Define":"Define","../ui/ViewBase":"ViewBase","./ResManager":"ResManager"}],UpgradeViewCtr:[function(e,t,o){"use strict";cc._RF.push(t,"3f1aeFhs95FYqiZ1qmDcKh3","UpgradeViewCtr");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../common/Common"),r=e("./ViewBase"),c=e("../UserInfo"),s=e("../Levellnfo"),l=e("../manager/UIManager"),d=e("../common/Define"),u=e("../manager/ParticleEffectManager"),f=e("../manager/SoundManager"),h=cc._decorator,p=h.ccclass,g=h.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textDesc1=null,t.textDesc2=null,t.textUpgradeDesc=null,t.textUpgradeSpend=null,t.btn_speed=null,t.btn_gold=null,t.btn_fire=null,t.btn_offline=null,t.btn_upgrade=null,t.btn_vedio=null,t.btn_share=null,t.nodeSpeedDark=null,t.nodeGoldDark=null,t.nodeFireDark=null,t.nodeOfflineDark=null,t.nodeBgs=null,t.nodebtnColors=null,t.nodeGuideArrow=null,t.textGuideDesc=null,t.node_addHome=null,t.curTag="btn_speed",t.isClickShare=!1,t.upgradeSpeedSpendGold=0,t.upgradeFireSpendGold=0,t.upgradeGoldSpendGold=0,t.upgradeOfflineSpendGold=0,t}return n(t,e),t.prototype.refreshView=function(e){void 0===e&&(e=!1),console.log("\u5237\u65b0ui\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002\u3002"),this.isClickShare=!1,this.upgradeFireSpendGold=s.default.getUpgradeNeedGold(c.default.firePower+1),this.upgradeSpeedSpendGold=s.default.getUpgradeNeedGold(c.default.bulletShootMaxCount-2),this.upgradeGoldSpendGold=s.default.getUpgradeNeedGold(c.default.goldDropLevel+1),this.upgradeOfflineSpendGold=s.default.getUpgradeNeedGold(c.default.offLineLevel+1),this.onClick(this.curTag),this.handlerGuideArrow(),l.default.getInstance().executeEvent(d.default.viewBattle,"hidePrompt"),4==i.default.curLevel&&0==c.default.showAddHomeTag?(c.default.saveShowAddHome(),c.default.showAddHomeTag=1,this.node_addHome.active=!0,this.node_addHome.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.2,new cc.Vec2(0,5)),cc.moveBy(.2,new cc.Vec2(0,-5)))))):this.node_addHome.active=!1},t.prototype.hideView=function(){e.prototype.hideView.call(this)},t.prototype.addEvent=function(){i.default.addClickEvent(this.btn_speed,this.onClick.bind(this)),i.default.addClickEvent(this.btn_fire,this.onClick.bind(this)),i.default.addClickEvent(this.btn_gold,this.onClick.bind(this)),i.default.addClickEvent(this.btn_offline,this.onClick.bind(this)),i.default.addClickEvent(this.btn_upgrade,this.onClick.bind(this)),i.default.addClickEvent(this.btn_vedio,this.onClickVideo.bind(this))},t.prototype.onClickVideo=function(e){var t=this,o=MiniGameAds.isRewardvideoReady();f.default.pause(),o?MiniGameAds.showRewardedVideo().then(function(){console.info("====> show RewardedVideo success"),f.default.resume(),t.upgradeSkills()}).catch(function(e){console.error("====> show RewardedVideo error: "+e.message),f.default.resume()}):(console.info("====> RewardedVideo not ready"),f.default.resume())},t.prototype.onClickShare=function(e){},t.prototype.onClick=function(e){"btn_upgrade"==e||(this.curTag=e),this.refreshButtonStates("btn_upgrade"==e)},t.prototype.upgradeSkills=function(){"btn_speed"==this.curTag?c.default.saveBulletShootMaxCount(1):"btn_fire"==this.curTag?c.default.saveFirePower():"btn_gold"==this.curTag?c.default.saveDropGoldLevel():"btn_offline"==this.curTag&&c.default.saveOffLineLevel(),this.refreshButtonStates(!1)},t.prototype.refreshButtonStates=function(e){for(var t=0;t<this.nodeBgs.children.length;t++)this.nodeBgs.children[t].active=!1;var o=0,n=0,a=0,r=!1,f=null;"btn_speed"==this.curTag?(n=c.default.bulletShootMaxCount-2,a=s.default.getUpgradeNeedGold(n),this.upgradeSpeedSpendGold=a,this.textDesc1.string="Firing speed",console.log("spendGold = "+a),console.log("UserInfo.curGold = "+c.default.curGold),e&&c.default.curGold>=a&&(c.default.saveGoldData(-1*a),c.default.saveBulletShootMaxCount(1),r=!0,f=new cc.Color(255,90,0)),this.textDesc2.string=(c.default.bulletShootMaxCount+1).toString()+" rounds/S"):"btn_fire"==this.curTag?(n=c.default.firePower+1,a=s.default.getUpgradeNeedGold(n),this.upgradeFireSpendGold=a,this.textDesc1.string="Firepower",e&&c.default.curGold>=a&&(c.default.saveGoldData(-1*a),c.default.saveFirePower(),r=!0,f=new cc.Color(202,9,232)),this.textDesc2.string=10*c.default.firePower+100+"%",o=1):"btn_gold"==this.curTag?(n=c.default.goldDropLevel+1,a=s.default.getUpgradeNeedGold(n),this.upgradeGoldSpendGold=a,this.textDesc1.string="Coin",e&&c.default.curGold>=a&&(c.default.saveGoldData(-1*a),c.default.saveDropGoldLevel(),r=!0,f=new cc.Color(9,122,255)),this.textDesc2.string=10*c.default.goldDropLevel+100+"%",o=2):"btn_offline"==this.curTag&&(n=c.default.offLineLevel+1,a=s.default.getUpgradeNeedGold(n),this.upgradeOfflineSpendGold=a,this.textDesc1.string="Offline",e&&c.default.curGold>=a&&(c.default.saveGoldData(-1*a),c.default.saveOffLineLevel(),r=!0,f=new cc.Color(255,220,3)),this.textDesc2.string=10*c.default.offLineLevel+100+"%",o=3),console.log("curLevel ============="+n);n-1>0&&(n-1)%10==0?(this.btn_vedio.stopAllActions(),this.btn_vedio.active=!0,!0,i.default.actionLeftRightRotate(this.btn_vedio,.15,18,3)):this.btn_vedio.active=!1,e&&c.default.curGold<a&&(i.default.showPrompt("Insufficient coins"),this.btn_upgrade.stopAllActions(),this.btn_upgrade.rotation=0),c.default.curGold>=a?(this.btn_upgrade.stopAllActions(),i.default.actionLeftRightRotate(this.btn_upgrade)):(this.btn_upgrade.stopAllActions(),this.btn_upgrade.rotation=0),r&&u.default.getInstance().showParticleEffect(5,new cc.Vec2(40,0),1,f,this.textDesc2.node),l.default.getInstance().isShow(d.default.viewMain)&&l.default.getInstance().executeEvent(d.default.viewMain),this.textUpgradeSpend.string=i.default.getShowNumber(a),this.nodeBgs.children[o].active=!0;var h=this.nodebtnColors.children[o].getComponent(cc.Sprite).spriteFrame;this.btn_upgrade.getComponent(cc.Sprite).spriteFrame=h,this.nodeSpeedDark.active=!1,this.nodeFireDark.active=!1,this.nodeGoldDark.active=!1,this.nodeOfflineDark.active=!1,this.btn_fire.active=!1,this.btn_gold.active=!1,this.btn_offline.active=!1,c.default.bulletShootMaxCount>12?this.btn_fire.active=!0:this.nodeFireDark.active=!0,c.default.firePower>1?this.btn_gold.active=!0:this.nodeGoldDark.active=!0,c.default.goldDropLevel>1?this.btn_offline.active=!0:this.nodeOfflineDark.active=!0,i.default.curLevelGold=c.default.curGold,this.handlerGuideArrow(),l.default.getInstance().refreshGoldInfo(d.default.viewBattle),l.default.getInstance().refreshGoldInfo(d.default.viewMain)},t.prototype.handlerGuideArrow=function(){var e=null;if(c.default.curLevel>=2&&c.default.bulletShootMaxCount<=3&&c.default.curGold>=this.upgradeSpeedSpendGold?e="btn_speed"!=this.curTag?this.btn_speed:this.btn_upgrade:c.default.bulletShootMaxCount>=12&&this.btn_fire.active&&0==c.default.firePower&&c.default.curGold>=this.upgradeFireSpendGold?e="btn_fire"!=this.curTag?this.btn_fire:this.btn_upgrade:c.default.firePower>1&&1==c.default.goldDropLevel&&c.default.curGold>=this.upgradeGoldSpendGold?e="btn_gold"!=this.curTag?this.btn_gold:this.btn_upgrade:c.default.goldDropLevel>1&&0==c.default.offLineLevel&&c.default.curGold>=this.upgradeOfflineSpendGold&&(e="btn_offline"!=this.curTag?this.btn_offline:this.btn_upgrade),null==e&&(c.default.bulletShootMaxCount-(c.default.firePower+2)>=5&&c.default.firePower<=20&&c.default.firePower>1&&c.default.curGold>=this.upgradeFireSpendGold?e="btn_fire"!=this.curTag?this.btn_fire:this.btn_upgrade:c.default.firePower-c.default.goldDropLevel>=10&&c.default.goldDropLevel<=20&&c.default.curGold>=this.upgradeGoldSpendGold?e="btn_gold"!=this.curTag?this.btn_gold:this.btn_upgrade:c.default.goldDropLevel-c.default.offLineLevel>=10&&c.default.offLineLevel<=20&&c.default.curGold>=this.upgradeOfflineSpendGold&&(e="btn_offline"!=this.curTag?this.btn_offline:this.btn_upgrade)),console.log(e),null!=e){e==this.btn_upgrade?"btn_speed"==this.curTag?this.textGuideDesc.string="Add bullets":"btn_fire"==this.curTag?this.textGuideDesc.string="Increase bullet power":"btn_gold"==this.curTag?this.textGuideDesc.string="Get more coins":(this.curTag="btn_offline")&&(this.textGuideDesc.string="Increase offline rewards"):this.textGuideDesc.string="",this.nodeGuideArrow.stopAllActions(),this.nodeGuideArrow.active=!0,this.nodeGuideArrow.position=new cc.Vec2(e.position.x,e.position.y+150);var t=this.nodeGuideArrow.position.x,o=this.nodeGuideArrow.position.y,n=cc.sequence(cc.moveTo(.5,new cc.Vec2(t,o-20)),cc.moveTo(.5,new cc.Vec2(t,o+10)));this.nodeGuideArrow.runAction(cc.repeatForever(n))}else this.nodeGuideArrow.stopAllActions(),this.nodeGuideArrow.active=!1},t.prototype.executeEvent=function(e){void 0===e&&(e="defualt"),this.isClickShare&&(this.isClickShare=!1,this.upgradeSkills())},a([g(cc.Label)],t.prototype,"textDesc1",void 0),a([g(cc.Label)],t.prototype,"textDesc2",void 0),a([g(cc.Label)],t.prototype,"textUpgradeDesc",void 0),a([g(cc.Label)],t.prototype,"textUpgradeSpend",void 0),a([g(cc.Node)],t.prototype,"btn_speed",void 0),a([g(cc.Node)],t.prototype,"btn_gold",void 0),a([g(cc.Node)],t.prototype,"btn_fire",void 0),a([g(cc.Node)],t.prototype,"btn_offline",void 0),a([g(cc.Node)],t.prototype,"btn_upgrade",void 0),a([g(cc.Node)],t.prototype,"btn_vedio",void 0),a([g(cc.Node)],t.prototype,"btn_share",void 0),a([g(cc.Node)],t.prototype,"nodeSpeedDark",void 0),a([g(cc.Node)],t.prototype,"nodeGoldDark",void 0),a([g(cc.Node)],t.prototype,"nodeFireDark",void 0),a([g(cc.Node)],t.prototype,"nodeOfflineDark",void 0),a([g(cc.Node)],t.prototype,"nodeBgs",void 0),a([g(cc.Node)],t.prototype,"nodebtnColors",void 0),a([g(cc.Node)],t.prototype,"nodeGuideArrow",void 0),a([g(cc.Label)],t.prototype,"textGuideDesc",void 0),a([g(cc.Node)],t.prototype,"node_addHome",void 0),t=a([p],t)}(r.default);o.default=v,cc._RF.pop()},{"../Levellnfo":"Levellnfo","../UserInfo":"UserInfo","../common/Common":"Common","../common/Define":"Define","../manager/ParticleEffectManager":"ParticleEffectManager","../manager/SoundManager":"SoundManager","../manager/UIManager":"UIManager","./ViewBase":"ViewBase"}],UserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"a731aGtL5JN8raZ8BCgVxYC","UserInfo");var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./common/Define"),i=e("./common/Common"),r=e("./datas/LDataCannonManager"),c=e("./manager/TimeTaskManager"),s=e("./datas/LDataSceneManager"),l=cc._decorator,d=l.ccclass,u=(l.property,function(){function e(){}var t;return t=e,e.loadAllData=function(){var e=cc.sys.localStorage.getItem(a.default.datakeyDate);this.curWeek=null!=e&&""!=e?Number(e):-99,console.log("curWeek = "+e);var o=new Date;i.default.getYearWeek(o.getFullYear(),o.getMonth()+1,o.getDate())!=this.curWeek&&-99!=this.curWeek&&(this.maxScore=0,this.saveMaxScore()),t.saveCannonById(1e3,2);var n=cc.sys.localStorage.getItem(a.default.dataKeyGold);this.curGold=null!=n&&""!=n?Number(n):0;var r=cc.sys.localStorage.getItem(a.default.dataKeyLevel);this.curLevel=null!=r&&""!=r?Number(r):1;var c=cc.sys.localStorage.getItem(a.default.dataKeyShootCount);this.bulletShootMaxCount=null!=c&&""!=c?Number(c):3;var s=cc.sys.localStorage.getItem(a.default.dataKeyMaxScore);this.maxScore=null!=s&&""!=s?Number(s):0;var l=cc.sys.localStorage.getItem(a.default.dataKeyFirePower);this.firePower=null!=l&&""!=l?Number(l):0,this.addFirePower=Math.floor(.1*this.firePower+1),this.addFirePowerCount=Math.floor(.1*(this.firePower-1)+1-this.addFirePower)*this.bulletShootMaxCount;var d=cc.sys.localStorage.getItem(a.default.dataKeyGoldDropLevel);this.goldDropLevel=null!=d&&""!=d?Number(d):1;var u=cc.sys.localStorage.getItem(a.default.dataKeyOffLine);this.offLineLevel=null!=u&&""!=u?Number(u):0;var f=cc.sys.localStorage.getItem(a.default.dataKeyLastQuitTime);this.lastQuitTime=null!=f&&""!=f?Number(f):0;var h=cc.sys.localStorage.getItem(a.default.dataKeyTotalScore);this.totalScore=null!=h&&""!=h?Number(h):0,t.curUseCannonId=cc.sys.localStorage.getItem(a.default.dataKeyCurUseCannonId),t.curUseCannonId=null!=h&&""!=h?Number(t.curUseCannonId):0,t.brate=cc.sys.localStorage.getItem(a.default.dataKeyBrate),null!=h&&""!=h?t.brate=Number(t.brate):(t.brate=1,this.saveBrateSate());var p=cc.sys.localStorage.getItem(a.default.datakeyShowAddHomeTag);t.showAddHomeTag=null!=p&&""!=p?Number(p):0;var g=cc.sys.localStorage.getItem(a.default.datakeyScene);t.curSceneId=null!=g&&""!=g?Number(g):1e3,console.log("UserInfo.totalScore = "+t.totalScore),t.handlerRewardCannons(a.default.cannonDropGoldLevel),t.handlerRewardCannons(a.default.cannonTotalScore)},e.saveBrateSate=function(){cc.sys.localStorage.setItem(a.default.dataKeyBrate,this.brate)},e.saveGoldData=function(e){void 0===e&&(e=0),this.curGold=this.curGold+e,cc.sys.localStorage.setItem(a.default.dataKeyGold,this.curGold)},e.saveBulletShootMaxCount=function(e){void 0===e&&(e=0),this.bulletShootMaxCount=this.bulletShootMaxCount+e,cc.sys.localStorage.setItem(a.default.dataKeyShootCount,t.bulletShootMaxCount)},e.saveNextLevel=function(){this.curLevel=this.curLevel+1,cc.sys.localStorage.setItem(a.default.dataKeyLevel,this.curLevel)},e.saveFirePower=function(){this.firePower=this.firePower+1,cc.sys.localStorage.setItem(a.default.dataKeyFirePower,this.firePower);var e=.1*this.firePower+1;this.addFirePower=Math.floor(e),this.addFirePowerCount=(e-this.addFirePower)*this.bulletShootMaxCount},e.saveDropGoldLevel=function(){this.goldDropLevel=this.goldDropLevel+1,cc.sys.localStorage.setItem(a.default.dataKeyGoldDropLevel,this.goldDropLevel),t.handlerRewardCannons(a.default.cannonDropGoldLevel)},e.saveOffLineLevel=function(){this.offLineLevel=this.offLineLevel+1,cc.sys.localStorage.setItem(a.default.dataKeyOffLine,this.offLineLevel),t.handlerRewardCannons(a.default.cannonOffLine)},e.saveMaxScore=function(){var e=new Date,t=i.default.getYearWeek(e.getFullYear(),e.getMonth()+1,e.getDate());cc.sys.localStorage.setItem(a.default.dataKeyMaxScore,this.maxScore),cc.sys.localStorage.setItem(a.default.datakeyDate,t.toString())},e.saveTotalScore=function(){cc.sys.localStorage.setItem(a.default.dataKeyTotalScore,this.totalScore),t.handlerRewardCannons(a.default.cannonTotalScore)},e.saveLastQuitTime=function(){var e=new Date;cc.sys.localStorage.setItem(a.default.dataKeyLastQuitTime,e.getTime())},e.saveShowAddHome=function(){cc.sys.localStorage.setItem(a.default.datakeyShowAddHomeTag,1)},e.god=function(e){i.default.isGod=!0,c.default.addTimeTask(e,function(){i.default.isGod=!1}.bind(this),"reviveGame",1)},e.setCurUseCannonId=function(e){t.curUseCannonId=e,cc.sys.localStorage.setItem(a.default.dataKeyCurUseCannonId,t.curUseCannonId)},e.setCurUseSceneId=function(e){t.curSceneId=e,cc.sys.localStorage.setItem(a.default.datakeyScene,t.curSceneId)},e.getCurSceneIndex=function(){for(var e=0,o=0;o<s.default.dataList.length;o++)s.default.GetDataById(o).saveID==t.curSceneId&&(e=o);return e},e.handlerRewardCannons=function(e){for(var o=0;o<r.default.dataList.length;o++){(n=r.default.dataList[o]).getmode==e&&(t.isOwnCannonById(n.cannonId)||(n.getmode==a.default.cannonTotalScore?t.totalScore>=n.scoreget&&t.addNewCannon(n.cannonId,1):n.getmode==a.default.cannonDropGoldLevel?(console.log("UserInfo.goldDropLevel = "+t.goldDropLevel+"   data.goldlevel = "+n.goldlevel),t.goldDropLevel>=n.goldlevel&&t.addNewCannon(n.cannonId,1)):n.getmode==a.default.cannonOffLine&&(console.log("UserInfo.offLineLevel = "+t.offLineLevel+"   data.offline = "+n.offline),t.offLineLevel>=n.offline&&t.addNewCannon(n.cannonId,1))))}for(o=0;o<s.default.dataList.length;o++){var n;(n=s.default.dataList[o]).getmode==e&&(t.isOwnCannonById(n.saveID)||(n.getmode==a.default.cannonTotalScore?t.totalScore>=n.scoreget&&(console.log("\u6dfb\u52a0\u65b0\u7684\u573a\u666f"),t.addNewCannon(n.saveID,1)):n.getmode==a.default.cannonDropGoldLevel&&(console.log("UserInfo.goldDropLevel = "+t.goldDropLevel+"   data.goldlevel = "+n.goldlevel),t.goldDropLevel>=n.goldlevel&&t.addNewCannon(n.saveID,1))))}},e.saveCannonById=function(e,t){void 0===t&&(t=1);var o=a.default.dataKeyLastQuitTime+e.toString();cc.sys.localStorage.setItem(o,t)},e.isOwnCannonById=function(e){if(0==e)return!0;var t=cc.sys.localStorage.getItem(a.default.dataKeyLastQuitTime+e.toString());return null!=t&&""!=t},e.getCannnonState=function(e){var t=cc.sys.localStorage.getItem(a.default.dataKeyLastQuitTime+e.toString());return t=null!=t&&""!=t?Number(t):0},e.isHaveNewCannon=function(){for(var e=0;e<r.default.dataList.length;e++){if(1==t.getCannnonState(r.default.dataList[e].cannonId))return!0}return!1},e.isHaveNewScene=function(){for(var e=0;e<s.default.dataList.length;e++){if(1==t.getCannnonState(s.default.dataList[e].saveID))return!0}return!1},e.addNewCannon=function(e,o){void 0===o&&(o=1),t.saveCannonById(e,o)},e.clearAllDatas=function(){cc.sys.localStorage.clear()},e.curLevel=1,e.bulletShootMaxCount=3,e.maxScore=0,e.serverMaxScore=0,e.firePower=1,e.goldDropLevel=1,e.curGold=0,e.offLineLevel=0,e.firePowerAddRate=1,e.lastQuitTime=0,e.brate=1,e.addFirePower=1,e.addFirePowerCount=0,e.curWeek=-99,e.avatarUrl="",e.nickName="",e.openid="",e.totalScore=0,e.showAddHomeTag=0,e.curSceneId=0,e=t=n([d],e)}());o.default=u,cc._RF.pop()},{"./common/Common":"Common","./common/Define":"Define","./datas/LDataCannonManager":"LDataCannonManager","./datas/LDataSceneManager":"LDataSceneManager","./manager/TimeTaskManager":"TimeTaskManager"}],ViewBase:[function(e,t,o){"use strict";cc._RF.push(t,"f6b42ZkZZlIoaHi6cuvdBSR","ViewBase");var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),a=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../common/Define"),r=cc._decorator,c=r.ccclass,s=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isNeedAddEvent=!0,t.showActionType=i.default.center,t.isShow=!1,t}return n(t,e),t.prototype.showView=function(){this.isNeedAddEvent&&(this.initView(),this.addEvent(),this.isNeedAddEvent=!1),this.node.setSiblingIndex(this.node.getParent().childrenCount),this.node.active=!0,this.refreshView(!0),this.showActionType==i.default.center?this.node.position=cc.Vec2.ZERO:this.showAction(),this.isShow=!0},t.prototype.hideView=function(){this.node.position=new cc.Vec2(-9999,-9999),this.node.active=!1,this.isShow=!1},t.prototype.refreshView=function(e){void 0===e&&(e=!1)},t.prototype.refreshGoldInfo=function(){},t.prototype.addEvent=function(){},t.prototype.initView=function(){},t.prototype.showAction=function(){this.showActionType==i.default.left?this.node.position=new cc.Vec2(-640,0):this.showActionType==i.default.right?this.node.position=new cc.Vec2(640,0):this.showActionType==i.default.down?this.node.position=new cc.Vec2(0,-1136):this.showActionType==i.default.up&&(this.node.position=new cc.Vec2(0,1136));var e=cc.moveTo(.5,cc.Vec2.ZERO).easing(cc.easeBackOut());this.node.runAction(cc.sequence(e,cc.callFunc(function(){this.showActionCallBack()}.bind(this))))},t.prototype.showActionCallBack=function(){},t.prototype.executeEvent=function(e){void 0===e&&(e="defualt")},t=a([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../common/Define":"Define"}],WXHelper:[function(e,t,o){"use strict";cc._RF.push(t,"97afbETELhDwIPnJiJJxH1C","WXHelper");var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Common"),i=e("../UserInfo"),r=e("./Define"),c=cc._decorator,s=c.ccclass,l=(c.property,function(){function e(){this.isShow=!1,this.tex=null,this.display=null}var t;return t=e,e.prototype.initWXHelper=function(){t.instance=this,cc.sys.platform==cc.sys.WECHAT_GAME&&this.initOnShareAppMessage()},e.prototype.initOnShareAppMessage=function(){wx.showShareMenu();var e="\u9668\u77f3\u5760\u843d\uff0c\u4eba\u95f4\u5927\u70ae\u4e00\u7ea7\u51c6\u5907",t="texture/share02";0!=a.default.getRandom(0,3)&&(e="\u6b3a\u8d1f\u6211\uff0c\u62ff\u6211\u7684\u610f\u5927\u5229\u70ae\u51fa\u6765",t="texture/share01"),cc.loader.loadRes(t,function(t,o){wx.onShareAppMessage(function(t){return{title:e,imageUrl:o.url,success:function(e){console.log("\u8f6c\u53d1\u6210\u529f!!!")},fail:function(e){console.log("\u8f6c\u53d1\u5931\u8d25!!!")}}})})},e.prototype.shareAppMessage=function(e,t){if(void 0===t&&(t=null),cc.sys.platform==cc.sys.WECHAT_GAME){var o="\u9668\u77f3\u5760\u843d\uff0c\u4eba\u95f4\u5927\u70ae\u4e00\u7ea7\u51c6\u5907",n="texture/share02";0!=a.default.getRandom(0,3)&&(o="\u6b3a\u8d1f\u6211\uff0c\u62ff\u6211\u7684\u610f\u5927\u5229\u70ae\u51fa\u6765",n="texture/share01"),cc.loader.loadRes(n,function(e,n){wx.shareAppMessage({title:o,imageUrl:n.url,success:function(e){console.log("\u8f6c\u53d1\u6210\u529f!!!")},fail:function(e){console.log("\u8f6c\u53d1\u5931\u8d25!!!")}}),null!=t&&t()})}},e.prototype._updaetSubDomainCanvas=function(){if(null!=this.tex&&cc.sys.platform==cc.sys.WECHAT_GAME){var e=window.wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.display.spriteFrame=new cc.SpriteFrame(this.tex)}},e.prototype.update=function(e){this.isShow&&this._updaetSubDomainCanvas()},e.prototype.showView=function(e,t){void 0===t&&(t="-1"),cc.sys.platform==cc.sys.WECHAT_GAME&&(console.log("\u663e\u793a\u5b50\u57df name = "+e),null!=this.tex&&(this.tex.destroy(),this.tex=null),this.tex=new cc.Texture2D,this.display.node.active=!0,this.tex.width=640,this.tex.height=1136,this.isShow=!0,wx.postMessage({messageType:"showView",viewName:e,tag:t}))},e.prototype.hideView=function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&(this.isShow=!1,null!=this.tex&&(this.tex.destroy(),this.tex=null),null!=this.display.spriteFrame&&(this.display.spriteFrame.destroy(),this.display.spriteFrame=null),this.display.node.active=!1,wx.postMessage({messageType:"hideView",viewName:e}))},e.prototype.submitScore=function(){console.log("submitScore 00000000"),a.default.totalShowScore>i.default.maxScore&&(i.default.maxScore=a.default.totalShowScore);i.default.maxScore.toString();var e=new Date;a.default.getYearWeek(e.getFullYear(),e.getMonth()+1,e.getDate()).toString();i.default.saveMaxScore()},e.wxCheckUpdate=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME&&"function"==typeof wx.getUpdateManager){var e=wx.getUpdateManager();e.onCheckForUpdate(function(e){e.hasUpdate&&wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u7248\u672c\u66f4\u65b0\u4e2d\u8bf7\u7a0d\u540e\uff01",showCancel:!1,confirmText:"",success:function(e){}}),console.log(e.hasUpdate)}),e.onUpdateReady(function(){console.log("wxCheckUpdate 444"),wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u8bf7\u91cd\u542f\u5e94\u7528\uff01",showCancel:!1,success:function(t){t.confirm&&(console.log("wxCheckUpdate aaa"),e.applyUpdate())}})}),e.onUpdateFailed(function(){console.log("wxCheckUpdate 555")})}},e.wxLogin=function(){console.log(" wxLogin ssssssssssssssss"),cc.sys.platform==cc.sys.WECHAT_GAME?(console.log(" wxLogin dddddddddd"),wx.getUserInfo({success:function(e){console.log("getUserInfo success"),console.log(e);var t=e.userInfo;i.default.nickName=t.nickName,i.default.avatarUrl=t.avatarUrl,wx.login({success:function(e){console.log(e),console.log("login success"),console.log(e.code)},fail:function(e){console.log("login fail")}})},fail:function(e){console.log("getUserInfo fail"),t.wxLogin()},complete:function(e){console.log("getUserInfo complete")}})):console.log(" wxLogin ddddddddd   55d")},e.wxCheckLogin=function(e){void 0===e&&(e=!0),a.default.isInMainViewLogin=e,console.log("wxCheckLogin aaaaaaaaaaaa "),cc.sys.platform==cc.sys.WECHAT_GAME&&(console.log("wxCheckLogin 111111111111111 "),wx.getSetting({success:function(o){var n=o.authSetting;console.log(n),!0===n["scope.userInfo"]?(console.log("resssssssssssssssss"),t.wxLogin(),console.log("\u7528\u6237\u5df2\u6388\u6743\uff0c\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u76f8\u5173 API")):!1===n["scope.userInfo"]?(console.log("isMainView ========= "+e),e||(console.log(" getSetting ssssssssssssssssssss"),wx.showModal({title:"\u4e16\u754c\u6392\u884c",content:"\u662f\u5426\u9700\u8981\u83b7\u53d6\u4e16\u754c\u6392\u884c\uff1f",showCancel:!0,cancelText:"\u5426",cancelColor:"#000000",confirmText:"\u662f",confirmColor:"#000000",success:function(e){e.cancel||wx.openSetting({success:function(e){console.log("\u6388\u6743\u7ed3\u679c.."),console.log(e),console.log(e.authSetting["scope.userInfo"]),e.authSetting["scope.userInfo"]&&(console.log("openSetting success"),t.wxLogin())},fail:function(e){console.log("openSetting fail")}})},fail:function(e){},complete:function(e){}})),console.log("\u7528\u6237\u5df2\u62d2\u7edd\u6388\u6743\uff0c\u518d\u8c03\u7528\u76f8\u5173 API \u6216\u8005 wx.authorize \u4f1a\u5931\u8d25\uff0c\u9700\u8981\u5f15\u5bfc\u7528\u6237\u5230\u8bbe\u7f6e\u9875\u9762\u6253\u5f00\u6388\u6743\u5f00\u5173")):(e||wx.authorize({scope:"scope.userInfo",success:function(){console.log("authorize success"),t.wxLogin()},fail:function(){console.log("authorize fail")}}),console.log("\u672a\u8be2\u95ee\u8fc7\u7528\u6237\u6388\u6743\uff0c\u8c03\u7528\u76f8\u5173 API \u6216\u8005 wx.authorize \u4f1a\u5f39\u7a97\u8be2\u95ee\u7528\u6237"))}}))},e.createImage=function(e,t){cc.loader.load({url:e,type:"jpg"},function(e,o){t.spriteFrame=new cc.SpriteFrame(o)})},e.showBannder=function(e){if("002"!=r.default.gameId&&cc.sys.platform==cc.sys.WECHAT_GAME){var o=wx.getSystemInfoSync().screenHeight,n=wx.getSystemInfoSync().screenWidth;console.log("showBannder isShow = "+e),e?(null==t.bannerAd&&(t.bannerAd=wx.createBannerAd({adUnitId:t.bannerAdId,style:{left:.5*(n-300),top:o-80,width:300}}),t.bannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),t.bannerAd.onError(function(e){console.log("showBannder onError = "),console.log(e)})),t.bannerAd.show().catch(function(e){return console.log(e)}),t.bannerAd.onResize(function(e){t.bannerAd.style.top=o-t.bannerAd.style.realHeight})):null!=t.bannerAd&&(t.bannerAd.destroy(),t.bannerAd=null)}},e.initRewardedVideoAd=function(){"002"!=r.default.gameId&&cc.sys.platform==cc.sys.WECHAT_GAME&&(console.log("initRewardedVideoAd   000"),t.video=wx.createRewardedVideoAd({adUnitId:t.videoId}),t.video.onError(function(e){console.log("\u5e7f\u544a\u64ad\u653e\u5931\u8d25"),t.videoCallBack(2)}),t.video.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.isLoadVideoSuccessful=!0}),console.log("initRewardedVideoAd   111"),t.video.onClose(function(e){t.isLoadVideoSuccessful=!1,e.isEnded?(console.log("\u5e7f\u544a\u64ad\u653e\u6210\u529f"),t.videoCallBack(1)):(console.log("\u5e7f\u544a\u64ad\u653e\u5931\u8d25"),t.videoCallBack(0))}))},e.showVideo=function(e){cc.sys.platform==cc.sys.WECHAT_GAME&&(t.isLoadVideoSuccessful?(console.log("showVideo   111"),t.videoCallBack=e,t.video.show().catch(function(e){return console.log(e)}).then(function(){return console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")})):console.log("\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"))},e.brateShort=function(){cc.sys.platform==cc.sys.WECHAT_GAME&&1==i.default.brate&&wx.vibrateShort({})},e.brateLong=function(){cc.sys.platform==cc.sys.WECHAT_GAME&&1==i.default.brate&&wx.vibrateLong({})},e.jumpToMiniProgram=function(e){wx.navigateToMiniProgram({appId:e,success:function(e){console.log("success 666"),console.log(e)},fail:function(e){console.log("fail 666"),console.log(e)},complete:function(){console.log("complete 666")}})},e.bannerAd=null,e.bannerAdId="adunit-b1e29e0c371087b3",e.isLoadVideoSuccessful=!1,e.video=null,e.videoId="adunit-68b829d3ac23ef00",e=t=n([s],e)}());o.default=l,cc._RF.pop()},{"../UserInfo":"UserInfo","./Common":"Common","./Define":"Define"}],protrait:[function(e,t,o){"use strict";cc._RF.push(t,"443aewhu0FOwaN2vRarui1n","protrait"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.view.setResizeCallback(function(){var e=cc.game.canvas.getBoundingClientRect();e.width>e.height?(cc.find("landscape").active=1,cc.director.pause()):(cc.find("landscape").active=0,cc.director.resume())})}}),cc._RF.pop()},{}]},{},["Ball","Bullet","CannonCtr","GoldCtr","LevelProgress","Levellnfo","Main","MiniGameInfo","ParticleEffect","PlayerData","RankingItem","SelectCannonItem","SelectSceneItem","Shake","UserInfo","ButtonEffect","Common","Define","FramaAnimations","FrameAnimation","ResInfo","ScollHelper","TimeTask","WXHelper","LDataCannon","LDataCannonManager","LDataGold","LDataGoldManager","LDataScene","LDataSceneManager","LDataStoncolour","LDataStoncolourManager","LDataStone","LDataStoneManager","CannonManager","GameManager","HttpManager","ParticleEffectManager","ResManager","SceneObjectManager ","SoundManager","TimeTaskManager","UIManager","protrait","BattleViewCtr","BlackViewCtr","GameResultCtr","GameWinViewCtr","MainViewCtr","OffLineRewardViewCtr","RankingViewCtr","ReviveViewCtr","SelectCannonViewCtr","SelectSceneViewCtr","UpgradeViewCtr","ViewBase"]);